{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/HBuilderProjects/car-maintenance-app/pages/shop/shop.vue?d0ad","webpack:///D:/HBuilderProjects/car-maintenance-app/pages/shop/shop.vue?737f","webpack:///D:/HBuilderProjects/car-maintenance-app/pages/shop/shop.vue?00d3","uni-app:///pages/shop/shop.vue","webpack:///D:/HBuilderProjects/car-maintenance-app/pages/shop/shop.vue?7a0f","webpack:///D:/HBuilderProjects/car-maintenance-app/pages/shop/shop.vue?96fd"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","args","timer","fn","data","categories","id","name","items","image","stock","price","brand","detail","currentCategory","cartList","cartCount","totalPrice","scrollTop","heightArr","showCartPopup","searchKeyword","searchResults","isSearching","loading","refreshing","page","hasMore","animation","showCartAnimation","cartAnimationStyle","left","top","cartDot","show","x","y","translateX","translateY","opacity","isManualSwitching","brands","selectedBrand","shopId","merchantId","computed","currentProducts","getCartQuantity","item","filteredCategories","category","onReady","onLoad","methods","getProducts","switchCategory","targetScrollTop","currentStep","setTimeout","animate","onProductScroll","heightSum","currentIndex","goToMerchant","uni","url","addToCart","categoryIndex","productIndex","console","title","icon","existItem","quantity","removeFromCart","updateCartInfo","showCart","hideCart","clearCart","content","success","goToCheckout","isStockLimit","searchProducts","product","clearSearch","onReachBottom","saveCartData","goToDetail","map","join","handleAddToCart","query","calculateHeight","height","handleQuantityInput","cartItem","handleQuantityBlur","selectBrand","loadCartCount","updateCartList","onSearchRefresh","getShopDetail","disableScroll","enableScroll","created","onShow","onPullDownRefresh"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AAC4L;AAC5L,gBAAgB,sMAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9EA;AAAA;AAAA;AAAA;AAA8tB,CAAgB,2uBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqPlvB;AACA;EACA;EACA;IAAA;IAAA;MAAAC;IAAA;IACA;IACAC;MACAC;MACAD;IACA;EACA;AACA;;AAEA;AACA;AAAA,eAEA;EACAE;IACA;MACAC,aACA;QACAC;QACAC;QACAC,QACA;UACAF;UACAG;UACAF;UACAG;UACAC;UACAC;UACAC;QAmBA;QACA;QAAA;MAEA,GACA;QACAP;QACAC;QACAC,QACA;UACAF;UACAG;UACAF;UACAG;UACAC;UACAC;UACAC;QAgBA;MAEA;MACA;MACA;QACAP;QACAC;QACAC,QACA;UACAF;UACAG;UACAF;UACAG;UACAC;UACAE;QAcA,GACA;UACAP;UACAG;UACAF;UACAG;UACAC;UACAE;QAYA;MAEA,GACA;QACAP;QACAC;QACAC,QACA;UACAF;UACAG;UACAF;UACAG;UACAC;UACAE;QAYA,GACA;UACAP;UACAG;UACAF;UACAG;UACAC;UACAE;QAWA;MAEA,GACA;QACAP;QACAC;QACAC,QACA;UACAF;UACAG;UACAF;UACAG;UACAC;UACAE;QAYA,GACA;UACAP;UACAG;UACAF;UACAG;UACAC;UACAE;QAWA;MAEA,GACA;QACAP;QACAC;QACAC,QACA;UACAF;UACAG;UACAF;UACAG;UACAC;UACAE;QAWA,GACA;UACAP;UACAG;UACAF;UACAG;UACAC;UACAE;QAWA;MAEA,EACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MAAA;MACAC,SACA;QAAAnC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA;MACA;MAAA,CACA;;MACAmC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACAC;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;UAAA,OACAC,wCACAA;QAAA,EACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;MACA;MAEA;QAAA,uCACAC;UACA1C;YAAA;UAAA;QAAA;MAAA,CACA;QAAA;MAAA;IACA;EACA;EACA2C;IACA;EACA;EACAC;IACA;MACA;MACA;MACA;IACA;IACA;IACA;IACA;MACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MAEA;MACA;;MAEA;MACA;MACA;;MAEA;MACA;QAAA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;;QAEA;QACAC;MACA;;MAEA;MACAA;;MAEA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;;MAEA;MACA;QACA,iBACA,gBACA;MACA;;MAEA;MACA;QACA;UACA;UACA;UACA;QACA;QAEA;QACA;QACA;QAEAC;QACAC;MACA;MAEAC;IACA;IAEA;IACAC;MACA;MAEA;MACA;MACA;MACA;;MAEA;MACA;QAAA;QACA;QACA;QAEA;QACA;QACA;QAEAC;;QAEA;QACA;QACA;UACAC;UACA;QACA;MACA;MAEA;QACA;MACA;IACA;IAEAC;MACAC;QACAC;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;QACA;QACAC;QACAC;MACA;MAEA;MACA;QACAC;QACA;MACA;MAEA;MACA;MAEA;QAAA,OACArB,wCACAA;MAAA,EACA;MAEA;QACA;UACAgB;YACAM;YACAC;UACA;UACA;QACA;;QAEA;QACA;;QAEA;QACA;UACA;UACA;YACAb;cACAM;gBACAM;gBACAC;cACA;YACA;UACA;YACAP;cACAM;cACAC;YACA;UACA;QACA;QAEAC;MACA;QACA;QACA;UACA;UACA;YACAd;cACAM;gBACAM;gBACAC;cACA;YACA;UACA;YACAP;cACAM;cACAC;YACA;UACA;QACA;QAEAxD;UACAT;UACA6D;UACAC;UACA7D;UACAI;UACAF;UACAC;UACA+D;QACA;MACA;MAEAT;MACA;MACA;IACA;IAEA;IACAU;MACA;MACA;MAEA;QAAA,OACA1B,wCACAA;MAAA,EACA;MAEA;QACA;UACAjC;QACA;UACAA;QACA;QACAiD;QACA;QACA;MACA;IACA;IAEA;IACAW;MACA;MACA;QACA;QACA;UAAA;QAAA;QACA;UAAA;QAAA;MACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MACAd;QACAM;QACAS;QACAC;UACA;YACA;YACAhB;YACA;YACA;UACA;QACA;MACA;IACA;IAEA;IACAiB;MACA;QACAjB;UACAM;UACAC;QACA;QACA;MACA;;MAEA;MACAP;QACAC;MACA;IACA;IAEA;IACAiB;MAAA;MACA;MACA;MAEA;QAAA,OACAlC,wCACAA;MAAA,EACA;MAEA;IACA;IAEA;IACAmC;MAAA;MACA;QACA;QACA;QACA;QACA;MACA;MAEA;MACA;MACA;;MAEA;MACA;QAAA;QACA;UACA;UACA;UACA;UACA;QACA;QAEA;UAAA,uCACAC;YACAjB;YACAC;UAAA;QAAA,CACA;QACA;MACA;MAEA;QACAJ;UACAM;UACAC;QACA;MACA;IACA;IAEA;IACAc;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;;MAEA;MACA5B;QACA;QACA;UACA;QACA;QACA;MACA;IACA;IAEA;IACA6B;MACAvB;IACA;IAEA;IACAwB;MACA;MAEA;QACAxB;UACAM;UACAC;QACA;QACA;MACA;;MAEA;MACAP;;MAEA;MACA;QACA1D;QACA6D;QAAA;QACAC;QAAA;QACA7D;QACAI;QACAD;QACAD;MACA;MAEA,qCACAgF;QAAA;MAAA,GACAC;MAEA1B;QACAC;MACA;IACA;IAEA;IACA0B;MAAA;MACA;MACA;QACA3B;UACAM;UACAC;QACA;QACA;MACA;;MAEA;MACA;QACA;QACA;MACA;;MAEA;MACA;;MAEA;MACA;MACAqB;QACA;QAEA;UACA1D;UACAC;UACAC;UACAC;UACAC;UACAC;QACA;QAEA;QACA;QAEAmB;UACA,iDACA;YACArB;YACAC;YACAC;UAAA,EACA;UAEAmB;YACA;YACA;UACA;QACA;MACA;IACA;IAEA;IACAmC;MAAA;MACA;MACA;MACA;MAEA;QAAA;QACA;QACA;QACA;QAEAC;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MAEA;QAAA,OACA/C,wCACAA;MAAA,EACA;MAEA;;MAEA;MACA;QACAgD;QACA;MACA;MAEA;;MAEA;MACA;QACA;UAAA,OACAhD,wCACAA;QAAA,EACA;QACA;UACA;QACA;QACA;QACA;QACA;MACA;MAEA;MACA;;MAEA;MACA;QACAgD;QACAhC;UACAM;UACAC;QACA;MACA;QACAyB;MACA;MAEA;MACA;MACA;IACA;IAEA;IACAC;MACA;QAAA,OACAjD,wCACAA;MAAA,EACA;MAEA;QACA;QACA;UACA;YAAA,OACAA,wCACAA;UAAA,EACA;UACA;YACA;UACA;UACA;UACA;UACA;QACA;;QAEA;QACA;;QAEA;QACAgD;QACA;QACA;MACA;IACA;IAEA;IACAE;MACA;;MAEA;MACA;QACA;QACA;MACA;;MAEA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;QACA;QACA;UAAA;QAAA;MACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;;MAEA;MACA;;MAEA;MACA3C;QACA;QACAM;UACAM;UACAC;QACA;MACA;IACA;IACA;IACA+B;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAAA,CACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IAAA;EAEA;EACAC;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;MACA;MACA;IACA;EACA;EACA;EACAC;IACA;IACA;MACA;IACA;;IAEA;IACAjD;MACAM;MACAA;QACAM;QACAC;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACttCA;AAAA;AAAA;AAAA;AAAmiC,CAAgB,khCAAG,EAAC,C;;;;;;;;;;;ACAvjC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/shop/shop.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/shop/shop.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./shop.vue?vue&type=template&id=71bf3ec6&\"\nvar renderjs\nimport script from \"./shop.vue?vue&type=script&lang=js&\"\nexport * from \"./shop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shop.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/shop/shop.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop.vue?vue&type=template&id=71bf3ec6&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.isSearching\n    ? _vm.__map(_vm.searchResults, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var m0 = _vm.getCartQuantity(item.categoryIndex, item.productIndex)\n        var m1 = m0\n          ? _vm.getCartQuantity(item.categoryIndex, item.productIndex)\n          : null\n        var m2 = m0\n          ? _vm.isStockLimit(item.categoryIndex, item.productIndex)\n          : null\n        var m3 = !m0\n          ? _vm.isStockLimit(item.categoryIndex, item.productIndex)\n          : null\n        return {\n          $orig: $orig,\n          m0: m0,\n          m1: m1,\n          m2: m2,\n          m3: m3,\n        }\n      })\n    : null\n  var l2 = !_vm.isSearching\n    ? _vm.__map(_vm.filteredCategories, function (category, categoryIndex) {\n        var $orig = _vm.__get_orig(category)\n        var l1 = _vm.__map(category.items, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var m4 = _vm.getCartQuantity(categoryIndex, index)\n          var m5 = m4 ? _vm.getCartQuantity(categoryIndex, index) : null\n          var m6 = m4 ? _vm.isStockLimit(categoryIndex, index) : null\n          var m7 = !m4 ? _vm.isStockLimit(categoryIndex, index) : null\n          return {\n            $orig: $orig,\n            m4: m4,\n            m5: m5,\n            m6: m6,\n            m7: m7,\n          }\n        })\n        return {\n          $orig: $orig,\n          l1: l1,\n        }\n      })\n    : null\n  var g0 = _vm.showCartPopup ? _vm.cartList.length : null\n  var g1 = _vm.showCartPopup ? _vm.cartList.length : null\n  var l3 =\n    _vm.showCartPopup && !(g1 === 0)\n      ? _vm.__map(_vm.cartList, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var m8 = _vm.isStockLimit(item.categoryIndex, item.productIndex)\n          return {\n            $orig: $orig,\n            m8: m8,\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l2: l2,\n        g0: g0,\n        g1: g1,\n        l3: l3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"container\">\n\t\t<!-- 搜索栏 -->\n\t\t<view class=\"search-bar\">\n\t\t\t<view class=\"search-input\">\n\t\t\t\t<text class=\"iconfont icon-search\"></text>\n\t\t\t\t<input \n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tv-model=\"searchKeyword\"\n\t\t\t\t\t@input=\"searchProducts\"\n\t\t\t\t\tplaceholder=\"搜索店内商品\" \n\t\t\t\t/>\n\t\t\t\t<text \n\t\t\t\t\tv-if=\"searchKeyword\" \n\t\t\t\t\tclass=\"clear-icon\"\n\t\t\t\t\t@tap=\"clearSearch\"\n\t\t\t\t>×</text>\n\t\t\t</view>\n\t\t\t<view class=\"merchant-entry\" @tap=\"goToMerchant\">\n\t\t\t\t<text>商家</text>\n\t\t\t\t<image src=\"/static/products/fangzi.png\" mode=\"aspectFit\" class=\"merchant-icon\"></image>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 在搜索栏下方添加品牌筛选 -->\n\t\t<view class=\"brand-filter\">\n\t\t\t<view class=\"brand-label\">品牌：</view>\n\t\t\t<scroll-view scroll-x class=\"brand-scroll\">\n\t\t\t\t<view class=\"brand-list\">\n\t\t\t\t\t<view \n\t\t\t\t\t\tclass=\"brand-item\" \n\t\t\t\t\t\t:class=\"{ active: selectedBrand === brand.id }\"\n\t\t\t\t\t\tv-for=\"brand in brands\" \n\t\t\t\t\t\t:key=\"brand.id\"\n\t\t\t\t\t\t@tap=\"selectBrand(brand.id)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ brand.name }}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\t\t\n\t\t<!-- 搜索结果列表 -->\n\t\t<view class=\"search-results-container\" v-if=\"isSearching\">\n\t\t\t<scroll-view \n\t\t\t\tscroll-y \n\t\t\t\tclass=\"search-results\"\n\t\t\t\t@scrolltolower=\"onReachBottom\"\n\t\t\t\t:refresher-enabled=\"true\"\n\t\t\t\t:refresher-triggered=\"refreshing\"\n\t\t\t\t@refresherrefresh=\"onSearchRefresh\"\n\t\t\t\tstyle=\"height: calc(100vh - 200rpx);\"\n\t\t\t>\n\t\t\t\t<view class=\"product-item\" \n\t\t\t\t\t  v-for=\"(item, index) in searchResults\" \n\t\t\t\t\t  :key=\"item.id\"\n\t\t\t\t\t  @tap=\"goToDetail(item, item.categoryIndex, item.productIndex)\">\n\t\t\t\t\t<image :src=\"item.image\" mode=\"aspectFit\"></image>\n\t\t\t\t\t<view class=\"product-info\">\n\t\t\t\t\t\t<view class=\"product-info-top\">\n\t\t\t\t\t\t\t<text class=\"product-name\">{{ item.name }}</text>\n\t\t\t\t\t\t\t<text class=\"product-stock\">库存{{ item.stock }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"product-price-wrap\">\n\t\t\t\t\t\t\t<text class=\"price\">￥{{ item.price }}/件</text>\n\t\t\t\t\t\t\t<view class=\"quantity-control my-quantity-control\" v-if=\"getCartQuantity(item.categoryIndex, item.productIndex)\">\n\t\t\t\t\t\t\t\t<text class=\"minus\" @tap.stop=\"removeFromCart(item.categoryIndex, item.productIndex)\">-</text>\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\tclass=\"num\" \n\t\t\t\t\t\t\t\t\ttype=\"digit\" \n\t\t\t\t\t\t\t\t\t:value=\"getCartQuantity(item.categoryIndex, item.productIndex)\"\n\t\t\t\t\t\t\t\t\t@input=\"handleQuantityInput($event, item.categoryIndex, item.productIndex)\"\n\t\t\t\t\t\t\t\t\t@blur=\"handleQuantityBlur(item.categoryIndex, item.productIndex)\"\n\t\t\t\t\t\t\t\t\t@tap.stop\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<text class=\"plus\" \n\t\t\t\t\t\t\t\t\t  :class=\"{ disabled: isStockLimit(item.categoryIndex, item.productIndex) }\"\n\t\t\t\t\t\t\t\t\t  @tap.stop.prevent=\"handleAddToCart(item.categoryIndex, item.productIndex, $event)\">+</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text v-else \n\t\t\t\t\t\t\t\t  class=\"add-btn\"\n\t\t\t\t\t\t\t\t  :class=\"{ disabled: isStockLimit(item.categoryIndex, item.productIndex) }\"\n\t\t\t\t\t\t\t\t  @tap.stop.prevent=\"handleAddToCart(item.categoryIndex, item.productIndex, $event)\">+</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"loading-more\" v-if=\"loading\">加载中...</view>\n\t\t\t\t<view class=\"no-more\" v-if=\"!hasMore\">更多了</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\t\t\n\t\t<!-- 主体内容区 -->\n\t\t<view class=\"main-content\" v-else>\n\t\t\t<!-- 左侧分类导航 -->\n\t\t\t<scroll-view scroll-y class=\"category-list\">\n\t\t\t\t<view class=\"category-item\" \n\t\t\t\t\t  v-for=\"(category, index) in categories\" \n\t\t\t\t\t  :key=\"category.id\"\n\t\t\t\t\t  :class=\"{ active: currentCategory === index }\"\n\t\t\t\t\t  @tap=\"switchCategory(index)\">\n\t\t\t\t\t{{ category.name }}\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t\t\n\t\t\t<!-- 右侧商品列表 -->\n\t\t\t<scroll-view \n\t\t\t\tscroll-y \n\t\t\t\tclass=\"product-list\"\n\t\t\t\t@scroll=\"onProductScroll\"\n\t\t\t\t:scroll-top=\"scrollTop\"\n\t\t\t\t:scroll-with-animation=\"false\"\n\t\t\t\tstyle=\"height: 100%;\"\n\t\t\t>\n\t\t\t\t<view \n\t\t\t\t\tv-for=\"(category, categoryIndex) in filteredCategories\" \n\t\t\t\t\t:key=\"category.id\"\n\t\t\t\t\tclass=\"category-wrapper\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"category-section-title\">\n\t\t\t\t\t\t{{ category.name }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"product-items\">\n\t\t\t\t\t\t<view class=\"product-item\" \n\t\t\t\t\t\t\t  v-for=\"(item, index) in category.items\" \n\t\t\t\t\t\t\t  :key=\"item.id\"\n\t\t\t\t\t\t\t  @tap=\"goToDetail(item, categoryIndex, index)\">\n\t\t\t\t\t\t\t<image :src=\"item.image\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t\t<view class=\"product-info\">\n\t\t\t\t\t\t\t\t<view class=\"product-info-top\">\n\t\t\t\t\t\t\t\t\t<text class=\"product-name\">{{ item.name }}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"product-stock\">库存{{ item.stock }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"product-price-wrap\">\n\t\t\t\t\t\t\t\t\t<text class=\"price\">￥{{ item.price }}/件</text>\n\t\t\t\t\t\t\t\t\t<view class=\"quantity-control\" v-if=\"getCartQuantity(categoryIndex, index)\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"minus\" @tap.stop=\"removeFromCart(categoryIndex, index)\">-</text>\n\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\tclass=\"num\" \n\t\t\t\t\t\t\t\t\t\t\ttype=\"digit\" \n\t\t\t\t\t\t\t\t\t\t\t:value=\"getCartQuantity(categoryIndex, index)\"\n\t\t\t\t\t\t\t\t\t\t\t@input=\"handleQuantityInput($event, categoryIndex, index)\"\n\t\t\t\t\t\t\t\t\t\t\t@blur=\"handleQuantityBlur(categoryIndex, index)\"\n\t\t\t\t\t\t\t\t\t\t\t@tap.stop\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<text class=\"plus\" \n\t\t\t\t\t\t\t\t\t\t\t  :class=\"{ disabled: isStockLimit(categoryIndex, index) }\"\n\t\t\t\t\t\t\t\t\t\t\t  @tap.stop.prevent=\"handleAddToCart(categoryIndex, index, $event)\">+</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<text v-else \n\t\t\t\t\t\t\t\t\t\t  class=\"add-btn my-add-btn\"\n\t\t\t\t\t\t\t\t\t\t  :class=\"{ disabled: isStockLimit(categoryIndex, index) }\"\n\t\t\t\t\t\t\t\t\t\t  @tap.stop.prevent=\"handleAddToCart(categoryIndex, index, $event)\">+</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\t\t\n\t\t<!-- 底部购车 -->\n\t\t<view class=\"cart-bar\">\n\t\t\t<view class=\"cart-left\">\n\t\t\t\t<view class=\"message-wrap\">\n\t\t\t\t\t<image src=\"/static/products/wenshangjai.png\" mode=\"aspectFit\" class=\"message-image\"></image>\n\t\t\t\t\t<text class=\"message-text\">问商家</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"cart-wrap\" @tap=\"showCart\">\n\t\t\t\t\t<view class=\"cart-icon\" :animation=\"cartAnimation\">\n\t\t\t\t\t\t<image src=\"/static/products/cart.png\" mode=\"aspectFit\" class=\"cart-image\"></image>\n\t\t\t\t\t\t<text class=\"cart-badge\" v-if=\"cartCount\">{{ cartCount }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"cart-text\">购物车</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"cart-right\">\n\t\t\t\t<text class=\"total-price\">￥{{ totalPrice }}</text>\n\t\t\t\t<view class=\"checkout-btn\" \n\t\t\t\t\t  :class=\"{ disabled: cartCount === 0 }\"\n\t\t\t\t\t  @tap=\"goToCheckout\">\n\t\t\t\t\t去结算\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 购物车弹出层 -->\n\t\t<view class=\"cart-popup\" v-if=\"showCartPopup\">\n\t\t\t<view class=\"cart-mask\" @tap=\"hideCart\"></view>\n\t\t\t<view class=\"cart-content\">\n\t\t\t\t<view class=\"cart-header\">\n\t\t\t\t\t<view class=\"header-left\">\n\t\t\t\t\t\t<text class=\"title\">购车</text>\n\t\t\t\t\t\t<text class=\"cart-count\" v-if=\"cartCount\">(共{{ cartCount }}件商品)</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"clear\" \n\t\t\t\t\t\t  v-if=\"cartList.length > 0\"\n\t\t\t\t\t\t  @tap=\"clearCart\">清空购物车</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"cart-empty\" v-if=\"cartList.length === 0\">\n\t\t\t\t\t<image src=\"/static/products/empty_cart.png\" mode=\"aspectFit\" class=\"empty-image\"></image>\n\t\t\t\t\t<text class=\"empty-text\">购物车还是空的</text>\n\t\t\t\t</view>\n\t\t\t\t<scroll-view scroll-y class=\"cart-list\" v-else>\n\t\t\t\t\t<view class=\"cart-item\" \n\t\t\t\t\t\t  v-for=\"(item, index) in cartList\" \n\t\t\t\t\t\t  :key=\"item.id\">\n\t\t\t\t\t\t<image :src=\"item.image\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t<view class=\"item-info\">\n\t\t\t\t\t\t\t<text class=\"item-name\">{{ item.name }}</text>\n\t\t\t\t\t\t\t<text class=\"item-price\">￥{{ item.price }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"quantity-control\">\n\t\t\t\t\t\t\t<text class=\"minus\" @tap.stop=\"removeFromCart(item.categoryIndex, item.productIndex)\">-</text>\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tclass=\"num\" \n\t\t\t\t\t\t\t\ttype=\"digit\" \n\t\t\t\t\t\t\t\t:value=\"item.quantity\"\n\t\t\t\t\t\t\t\t@input=\"handleQuantityInput($event, item.categoryIndex, item.productIndex)\"\n\t\t\t\t\t\t\t\t@blur=\"handleQuantityBlur(item.categoryIndex, item.productIndex)\"\n\t\t\t\t\t\t\t\t@tap.stop\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<text class=\"plus\" \n\t\t\t\t\t\t\t\t  :class=\"{ disabled: isStockLimit(item.categoryIndex, item.productIndex) }\"\n\t\t\t\t\t\t\t\t  @tap.stop.prevent=\"handleAddToCart(item.categoryIndex, item.productIndex)\">+</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</scroll-view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 添加购物车画 -->\n\t\t<view class=\"cart-dot-wrap\" v-if=\"cartDot.show\">\n\t\t\t<view class=\"cart-dot\" \n\t\t\t\t  :style=\"{\n\t\t\t\t\t  left: cartDot.x + 'px',\n\t\t\t\t\t  top: cartDot.y + 'px',\n\t\t\t\t\t  transform: `translate3d(${cartDot.translateX}px, ${cartDot.translateY}px, 0)`,\n\t\t\t\t\t  opacity: cartDot.opacity\n\t\t\t\t  }\">\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n// 在 methods 外部定义节流函数\nconst throttle = function(fn, delay) {\n\tlet timer = null;\n\treturn function(...args) {\n\t\tif (timer) return;\n\t\ttimer = setTimeout(() => {\n\t\t\tfn.apply(this, args);\n\t\t\ttimer = null;\n\t\t}, delay);\n\t}\n};\n\n// 修改商品项的高度常量\nconst ITEM_HEIGHT = 200; // 实际商品项度，包括内边距和框\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tcategories: [\n\t\t\t\t{\n\t\t\t\t\tid: 0,\n\t\t\t\t\tname: '刹车系统',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '1001',\n\t\t\t\t\t\t\timage: '/static/products/shangpin_default.png',\n\t\t\t\t\t\t\tname: '电动车刹车片',\n\t\t\t\t\t\t\tstock: 5,\n\t\t\t\t\t\t\tprice: 20,\n\t\t\t\t\t\t\tbrand: 'brand1',\n\t\t\t\t\t\t\tdetail: `<div class=\"detail-content\">\n\t\t\t\t\t\t\t\t<h3>产品参数</h3>\n\t\t\t\t\t\t\t\t<p>材质：高密陶瓷复材料</p>\n\t\t\t\t\t\t\t\t<p>适用车型：</p>\n\t\t\t\t\t\t\t\t<p>规格：标准规格</p>\n\t\t\t\t\t\t\t\t<p>装：1对装（2片）</p>\n\t\t\t\t\t\t\t\t<h3>产品特点</h3>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>高性能陶瓷配方，制动力强</li>\n\t\t\t\t\t\t\t\t\t<li>低噪音，不伤制盘</li>\n\t\t\t\t\t\t\t\t\t<li>耐高温，寿命长</li>\n\t\t\t\t\t\t\t\t\t<li>安装便捷，通用性强</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<h3>使用说明</h3>\n\t\t\t\t\t\t\t\t<p>1. 检查原刹车片磨损情况</p>\n\t\t\t\t\t\t\t\t<p>2. 更换前请清理刹车片座</p>\n\t\t\t\t\t\t\t\t<p>3. 对准卡槽安装新刹车片</p>\n\t\t\t\t\t\t\t\t<p>4. 测试制动效果</p>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t},\n\t\t\t\t\t\t// ... 其他车系统商品\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 1,\n\t\t\t\t\tname: '传感系统',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '2001',\n\t\t\t\t\t\t\timage: '/static/products/shangpin_default.png',\n\t\t\t\t\t\t\tname: '传感系统1速度传感器',\n\t\t\t\t\t\t\tstock: 50,\n\t\t\t\t\t\t\tprice: 45,\n\t\t\t\t\t\t\tbrand: 'brand2',\n\t\t\t\t\t\t\tdetail: `<div class=\"detail-content\">\n\t\t\t\t\t\t\t\t<h3>产品参数</h3>\n\t\t\t\t\t\t\t\t<p>电压：DC 12V</p>\n\t\t\t\t\t\t\t\t<p>感应距离：3-8mm可调</p>\n\t\t\t\t\t\t\t\t<p>防水等级：IP65</p>\n\t\t\t\t\t\t\t\t<p>线长50cm</p>\n\t\t\t\t\t\t\t\t<h3>产品</h3>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>精准感，反应灵敏</li>\n\t\t\t\t\t\t\t\t\t<li>防水防尘</li>\n\t\t\t\t\t\t\t\t\t<li>安装便捷</li>\n\t\t\t\t\t\t\t\t\t<li>用寿命长</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t<h3>适范围</h3>\n\t\t\t\t\t\t\t\t<p>适用于各类电动车速度检测系统</p>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t// ... 其他分类\n\t\t\t\t{\n\t\t\t\t\tid: 2,\n\t\t\t\t\tname: '照明系统',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '3001',\n\t\t\t\t\t\t\timage: '/static/products/shangpin_default.png',\n\t\t\t\t\t\t\tname: '照明系统LED大灯',\n\t\t\t\t\t\t\tstock: 45,\n\t\t\t\t\t\t\tprice: 40,\n\t\t\t\t\t\t\tdetail: `<div class=\"detail-content\">\n\t\t\t\t\t\t\t\t<h3>品参数</h3>\n\t\t\t\t\t\t\t\t<p>功率：12W</p>\n\t\t\t\t\t\t\t\t<p>电压：12V</p>\n\t\t\t\t\t\t\t\t<p>亮度：1200流明</p>\n\t\t\t\t\t\t\t\t<p>防等：IP65</p>\n\t\t\t\t\t\t\t\t<h3>产品特点</h3>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>超高亮度LED</li>\n\t\t\t\t\t\t\t\t\t<li>低耗设</li>\n\t\t\t\t\t\t\t\t\t<li>防水防尘</li>\n\t\t\t\t\t\t\t\t\t<li>寿命长达50000小时</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '3002',\n\t\t\t\t\t\t\timage: '/static/products/shangpin_default.png',\n\t\t\t\t\t\t\tname: '转向灯组',\n\t\t\t\t\t\t\tstock: 60,\n\t\t\t\t\t\t\tprice: 25,\n\t\t\t\t\t\t\tdetail: `<div class=\"detail-content\">\n\t\t\t\t\t\t\t\t<h3>产品数</h3>\n\t\t\t\t\t\t\t\t<p>电压：12V</p>\n\t\t\t\t\t\t\t\t<p>功率：5W</p>\n\t\t\t\t\t\t\t\t<p>颜色：琥珀色</p>\n\t\t\t\t\t\t\t\t<h3>产品特点</h3>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>高亮LED灯珠</li>\n\t\t\t\t\t\t\t\t\t<li>闪烁频率稳定</li>\n\t\t\t\t\t\t\t\t\t<li>装简便</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 3,\n\t\t\t\t\tname: '充电系统',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '4001',\n\t\t\t\t\t\t\timage: '/static/products/shangpin_default.png',\n\t\t\t\t\t\t\tname: '快速充电器',\n\t\t\t\t\t\t\tstock: 30,\n\t\t\t\t\t\t\tprice: 65,\n\t\t\t\t\t\t\tdetail: `<div class=\"detail-content\">\n\t\t\t\t\t\t\t\t<h3>产品数</h3>\n\t\t\t\t\t\t\t\t<p>输入电压：220V</p>\n\t\t\t\t\t\t\t\t<p>输出电压：48V</p>\n\t\t\t\t\t\t\t\t<p>充电电流：2A</p>\n\t\t\t\t\t\t\t\t<h3>产品点</h3>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>智能充电保护</li>\n\t\t\t\t\t\t\t\t\t<li>快速充电术</li>\n\t\t\t\t\t\t\t\t\t<li>多重安全保护</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '4002',\n\t\t\t\t\t\t\timage: '/static/products/shangpin_default.png',\n\t\t\t\t\t\t\tname: '充电口',\n\t\t\t\t\t\t\tstock: 80,\n\t\t\t\t\t\t\tprice: 15,\n\t\t\t\t\t\t\tdetail: `<div class=\"detail-content\">\n\t\t\t\t\t\t\t\t<h3>产品参数</h3>\n\t\t\t\t\t\t\t\t<p>材质：铜合金</p>\n\t\t\t\t\t\t\t\t<p>适：通用型</p>\n\t\t\t\t\t\t\t\t<h3>品特点</h3>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>接触良好</li>\n\t\t\t\t\t\t\t\t\t<li>耐用防腐</li>\n\t\t\t\t\t\t\t\t\t<li>安方便</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 4,\n\t\t\t\t\tname: '控制系统',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '5001',\n\t\t\t\t\t\t\timage: '/static/products/shangpin_default.png',\n\t\t\t\t\t\t\tname: '控制器',\n\t\t\t\t\t\t\tstock: 40,\n\t\t\t\t\t\t\tprice: 120,\n\t\t\t\t\t\t\tdetail: `<div class=\"detail-content\">\n\t\t\t\t\t\t\t\t<h3>参数</h3>\n\t\t\t\t\t\t\t\t<p>工作电压：48V</p>\n\t\t\t\t\t\t\t\t<p>大电流：30A</p>\n\t\t\t\t\t\t\t\t<p>防水等级：IP54</p>\n\t\t\t\t\t\t\t\t<h3>产品特点</h3>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>智能控制系统</li>\n\t\t\t\t\t\t\t\t\t<li>过载保护</li>\n\t\t\t\t\t\t\t\t\t<li>防水设计</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '5002',\n\t\t\t\t\t\t\timage: '/static/products/shangpin_default.png',\n\t\t\t\t\t\t\tname: '调速器',\n\t\t\t\t\t\t\tstock: 55,\n\t\t\t\t\t\t\tprice: 85,\n\t\t\t\t\t\t\tdetail: `<div class=\"detail-content\">\n\t\t\t\t\t\t\t\t<h3>产品参数</h3>\n\t\t\t\t\t\t\t\t<p>调速范围：1-5档</p>\n\t\t\t\t\t\t\t\t<p>适电压：48V</p>\n\t\t\t\t\t\t\t\t<h3>产品特点</h3>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>平稳调速</li>\n\t\t\t\t\t\t\t\t\t<li>防水设计</li>\n\t\t\t\t\t\t\t\t\t<li>安装便</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 5,\n\t\t\t\t\tname: '车身件',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '6001',\n\t\t\t\t\t\t\timage: '/static/products/shangpin_default.png',\n\t\t\t\t\t\t\tname: '后视镜',\n\t\t\t\t\t\t\tstock: 88,\n\t\t\t\t\t\t\tprice: 20,\n\t\t\t\t\t\t\tdetail: `<div class=\"detail-content\">\n\t\t\t\t\t\t\t\t<h3>产品数</h3>\n\t\t\t\t\t\t\t\t<p>材质：ABS+玻璃</p>\n\t\t\t\t\t\t\t\t<p>寸：标准型</p>\n\t\t\t\t\t\t\t\t<h3>产品特点</h3>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>视野清晰</li>\n\t\t\t\t\t\t\t\t\t<li>防震计</li>\n\t\t\t\t\t\t\t\t\t<li>装方便</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '6002',\n\t\t\t\t\t\t\timage: '/static/products/shangpin_default.png',\n\t\t\t\t\t\t\tname: '泥板',\n\t\t\t\t\t\t\tstock: 100,\n\t\t\t\t\t\t\tprice: 15,\n\t\t\t\t\t\t\tdetail: `<div class=\"detail-content\">\n\t\t\t\t\t\t\t\t<h3>产品参数</h3>\n\t\t\t\t\t\t\t\t<p>材质：PP塑料</p>\n\t\t\t\t\t\t\t\t<p>颜色黑色</p>\n\t\t\t\t\t\t\t\t<h3>品特点</h3>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li>防水耐用</li>\n\t\t\t\t\t\t\t\t\t<li>安装简单</li>\n\t\t\t\t\t\t\t\t\t<li>防泥效果好</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t], \n\t\t\tcurrentCategory: 0,\n\t\t\tcartList: [], // 购物车列表\n\t\t\tcartCount: 0, // 购物车数量\n\t\t\ttotalPrice: 0, // 总价\n\t\t\tscrollTop: 0,\n\t\t\theightArr: [], // 存储每个分类品列表的高度\n\t\t\tshowCartPopup: false, // 控制购物车弹出层显示\n\t\t\tsearchKeyword: '', // 搜索关键词\n\t\t\tsearchResults: [], // 搜结果\n\t\t\tisSearching: false, // 是否在搜索状态\n\t\t\tloading: false, // 加载态\n\t\t\trefreshing: false, // 刷新状态\n\t\t\tpage: 1, // 当前页码\n\t\t\thasMore: true, // 是否有更多数据\n\t\t\tanimation: null, // 添加动画例\n\t\t\tshowCartAnimation: false,\n\t\t\tcartAnimationStyle: {\n\t\t\t\tleft: '0px',\n\t\t\t\ttop: '0px'\n\t\t\t},\n\t\t\tcartDot: {\n\t\t\t\tshow: false,\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\ttranslateX: 0,\n\t\t\t\ttranslateY: 0,\n\t\t\t\topacity: 1\n\t\t\t},\n\t\t\tisManualSwitching: false, // 添加手动切换标记\n\t\t\tbrands: [\n\t\t\t\t{ id: 'all', name: '全部' },\n\t\t\t\t{ id: 'brand1', name: '品牌1' },\n\t\t\t\t{ id: 'brand2', name: '牌2' },\n\t\t\t\t{ id: 'brand3', name: '品3' },\n\t\t\t\t{ id: 'brand4', name: '品牌4' },\n\t\t\t\t{ id: 'brand5', name: '品牌5' },\n\t\t\t\t{ id: 'brand6', name: '品牌6' },\n\t\t\t\t// 可以添加更多品\n\t\t\t],\n\t\t\tselectedBrand: 'all', // 当前选中的品牌\n\t\t\tshopId: '', // 添加shopId存储\n\t\t\tmerchantId: '' // 添加merchantId存储\n\t\t}\n\t},\n\tcomputed: {\n\t\tcurrentProducts() {\n\t\t\treturn this.categories[this.currentCategory] || []\n\t\t},\n\t\t// 获商品购物车中的数量\n\t\tgetCartQuantity() {\n\t\t\treturn (categoryIndex, productIndex) => {\n\t\t\t\tconst cartItem = this.cartList.find(item => \n\t\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\t\titem.productIndex === productIndex\n\t\t\t\t)\n\t\t\t\treturn cartItem ? cartItem.quantity : 0\n\t\t\t}\n\t\t},\n\t\t// 修改筛选逻辑，返回过滤后的分类数组\n\t\tfilteredCategories() {\n\t\t\tif (this.selectedBrand === 'all') {\n\t\t\t\treturn this.categories;\n\t\t\t}\n\t\t\t\n\t\t\treturn this.categories.map(category => ({\n\t\t\t\t...category,\n\t\t\t\titems: category.items.filter(product => product.brand === this.selectedBrand)\n\t\t\t})).filter(category => category.items.length > 0);\n\t\t}\n\t},\n\tonReady() {\n\t\tthis.calculateHeight()\n\t},\n\tonLoad(options) {\n\t\tif (options.id) {\n\t\t\tthis.shopId = options.id\n\t\t\t// 可以在这里获取详情，括家ID\n\t\t\tthis.getShopDetail()\n\t\t}\n\t\t// 加载本地存储的购物车数据\n\t\tconst cartData = uni.getStorageSync('cartData')\n\t\tif (cartData) {\n\t\t\tthis.cartList = JSON.parse(cartData)\n\t\t\tthis.updateCartInfo()\n\t\t}\n\t},\n\tmethods: {\n\t\t// 修改获取商方法\n\t\tgetProducts(categoryIndex) {\n\t\t\treturn this.categories[categoryIndex]?.items || [];\n\t\t},\n\n\t\t// 在 methods 中修改 switchCategory 方法\n\t\tswitchCategory(index) {\n\t\t\tif (this.currentCategory === index) return;\n\t\t\t\n\t\t\tthis.currentCategory = index;\n\t\t\tthis.isManualSwitching = true;\n\t\t\t\n\t\t\t// 计算目标滚动位置\n\t\t\tlet targetScrollTop = 0;\n\t\t\tconst pxRatio = uni.getSystemInfoSync().windowWidth / 750;\n\t\t\t\n\t\t\t// 更精确的高度计算\n\t\t\tfor (let i = 0; i < index; i++) {\n\t\t\t\tconst category = this.filteredCategories[i];\n\t\t\t\tif (!category) continue;\n\t\t\t\t\n\t\t\t\t// 标题高度（不包含padding，因为padding已经包含在商品列表）\n\t\t\t\tconst titleHeight = 72 * pxRatio; // 减小标题实际占用高度\n\t\t\t\t\n\t\t\t\t// 商品列表高度（包含内边距）\n\t\t\t\tconst itemCount = category.items?.length || 0;\n\t\t\t\tconst itemHeight = ITEM_HEIGHT * pxRatio;\n\t\t\t\tconst itemsHeight = itemCount * itemHeight;\n\t\t\t\t\n\t\t\t\t// 每个分类的总高度\n\t\t\t\ttargetScrollTop += titleHeight + itemsHeight;\n\t\t\t}\n\t\t\t\n\t\t\t// 确保目标位置是整数\n\t\t\ttargetScrollTop = Math.floor(targetScrollTop);\n\t\t\t\n\t\t\t// 获取当前滚动位置\n\t\t\tconst startScrollTop = this.scrollTop;\n\t\t\tconst distance = targetScrollTop - startScrollTop;\n\t\t\t\n\t\t\t// 动画参数\n\t\t\tconst duration = 500;\n\t\t\tconst steps = 15;\n\t\t\tconst stepDuration = duration / steps;\n\t\t\tlet currentStep = 0;\n\t\t\t\n\t\t\t// 缓动函数\n\t\t\tconst easeInOutCubic = (t) => {\n\t\t\t\treturn t < 0.5\n\t\t\t\t\t? 4 * t * t * t\n\t\t\t\t\t: 1 - Math.pow(-2 * t + 2, 3) / 2;\n\t\t\t};\n\t\t\t\n\t\t\t// 执行动画\n\t\t\tconst animate = () => {\n\t\t\t\tif (currentStep >= steps) {\n\t\t\t\t\tthis.scrollTop = targetScrollTop;\n\t\t\t\t\tthis.isManualSwitching = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst progress = currentStep / steps;\n\t\t\t\tconst easeProgress = easeInOutCubic(progress);\n\t\t\t\tthis.scrollTop = Math.floor(startScrollTop + (distance * easeProgress));\n\t\t\t\t\n\t\t\t\tcurrentStep++;\n\t\t\t\tsetTimeout(animate, stepDuration);\n\t\t\t};\n\t\t\t\n\t\t\tanimate();\n\t\t},\n\t\t\n\t\t// 修改滚动监听方法\n\t\tonProductScroll: throttle(function(e) {\n\t\t\tif (this.isManualSwitching) return;\n\t\t\t\n\t\t\tconst scrollTop = e.detail.scrollTop;\n\t\t\tconst pxRatio = uni.getSystemInfoSync().windowWidth / 750;\n\t\t\tlet currentIndex = 0;\n\t\t\tlet heightSum = 0;\n\t\t\t\n\t\t\t// 更精确的滚动位置检测\n\t\t\tfor (let i = 0; i < this.filteredCategories.length; i++) {\n\t\t\t\tconst category = this.filteredCategories[i];\n\t\t\t\tif (!category) continue;\n\t\t\t\t\n\t\t\t\tconst titleHeight = 88 * pxRatio;\n\t\t\t\tconst itemsHeight = (category.items?.length || 0) * ITEM_HEIGHT * pxRatio;\n\t\t\t\tconst categoryGap = 20 * pxRatio;\n\t\t\t\t\n\t\t\t\theightSum += titleHeight + itemsHeight + categoryGap;\n\t\t\t\t\n\t\t\t\t// 使用阈值来判断当前分类\n\t\t\t\tconst threshold = heightSum - (itemsHeight / 2);\n\t\t\t\tif (scrollTop < threshold) {\n\t\t\t\t\tcurrentIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (this.currentCategory !== currentIndex) {\n\t\t\t\tthis.currentCategory = currentIndex;\n\t\t\t}\n\t\t}, 100),\n\t\t\n\t\tgoToMerchant() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/merchantDetails/merchantDetails?merchantId=${this.merchantId}`\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 修改加商品购物车方法\n\t\taddToCart(categoryIndex, productIndex) {\n\t\t\t// 如果是从购物车中直接操作\n\t\t\tif (typeof categoryIndex === 'object') {\n\t\t\t\tconst item = categoryIndex;\n\t\t\t\tcategoryIndex = item.categoryIndex;\n\t\t\t\tproductIndex = item.productIndex;\n\t\t\t}\n\n\t\t\tconst product = this.categories[categoryIndex]?.items[productIndex];\n\t\t\tif (!product) {\n\t\t\t\tconsole.error('商品不存在:', categoryIndex, productIndex);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet cartData = uni.getStorageSync('cartData')\n\t\t\tlet cartList = cartData ? JSON.parse(cartData) : []\n\t\t\t\n\t\t\tconst existItem = cartList.find(item => \n\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\titem.productIndex === productIndex\n\t\t\t);\n\n\t\t\tif (existItem) {\n\t\t\t\tif (existItem.quantity >= product.stock) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '已达到库存上限',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 计算剩余可购买数量\n\t\t\t\tconst remainingStock = product.stock - existItem.quantity;\n\t\t\t\t\n\t\t\t\t// 如果剩余可购数量小于等于3，显示提示\n\t\t\t\tif (remainingStock <= 3) {\n\t\t\t\t\t// 如果剩余库存为1（加入后为0），显示已达到库存上限\n\t\t\t\t\tif (remainingStock === 1) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '已达到库存上限',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: `库仅剩${remainingStock - 1}件`,\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\texistItem.quantity++;\n\t\t\t} else {\n\t\t\t\t// ���果库存小于等于3，显示提示\n\t\t\t\tif (product.stock <= 3) {\n\t\t\t\t\t// 如果库存为1，显示已达到库存上限\n\t\t\t\t\tif (product.stock === 1) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '已达到库存上限',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: `库存仅剩${product.stock - 1}件`,\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcartList.push({\n\t\t\t\t\tid: product.id,\n\t\t\t\t\tcategoryIndex,\n\t\t\t\t\tproductIndex,\n\t\t\t\t\tname: product.name,\n\t\t\t\t\tprice: product.price,\n\t\t\t\t\timage: product.image,\n\t\t\t\t\tstock: product.stock,\n\t\t\t\t\tquantity: 1\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tuni.setStorageSync('cartData', JSON.stringify(cartList));\n\t\t\tthis.updateCartInfo();\n\t\t\tthis.cartList = cartList;\n\t\t},\n\t\t\n\t\t// 从购物车移除商品\n\t\tremoveFromCart(categoryIndex, productIndex) {\n\t\t\tlet cartData = uni.getStorageSync('cartData')\n\t\t\tlet cartList = cartData ? JSON.parse(cartData) : []\n\t\t\t\n\t\t\tconst index = cartList.findIndex(item => \n\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\titem.productIndex === productIndex\n\t\t\t);\n\n\t\t\tif (index > -1) {\n\t\t\t\tif (cartList[index].quantity > 1) {\n\t\t\t\t\tcartList[index].quantity--;\n\t\t\t\t} else {\n\t\t\t\t\tcartList.splice(index, 1);\n\t\t\t\t}\n\t\t\t\tuni.setStorageSync('cartData', JSON.stringify(cartList));\n\t\t\t\tthis.updateCartInfo();\n\t\t\t\tthis.cartList = cartList;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 更物车信息\n\t\tupdateCartInfo() {\n\t\t\tconst cartData = uni.getStorageSync('cartData')\n\t\t\tif (cartData) {\n\t\t\t\tconst cartList = JSON.parse(cartData)\n\t\t\t\tthis.cartCount = cartList.reduce((total, item) => total + item.quantity, 0)\n\t\t\t\tthis.totalPrice = cartList.reduce((total, item) => total + item.price * item.quantity, 0)\n\t\t\t} else {\n\t\t\t\tthis.cartCount = 0\n\t\t\t\tthis.totalPrice = 0\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 显示物车\n\t\tshowCart() {\n\t\t\tthis.showCartPopup = true\n\t\t},\n\t\t\n\t\t// 隐藏购物车\n\t\thideCart() {\n\t\t\tthis.showCartPopup = false\n\t\t},\n\t\t\n\t\t// 清空购物车\n\t\tclearCart() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定要清空购物车吗？',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tthis.cartList = [];\n\t\t\t\t\t\tuni.setStorageSync('cartData', '[]');\n\t\t\t\t\t\tthis.updateCartInfo();\n\t\t\t\t\t\tthis.hideCart();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 修改去结按钮点击事\n\t\tgoToCheckout() {\n\t\t\tif (this.cartCount === 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请先选择商品',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\t// TODO: 跳转结算页面\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/checkout/checkout'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 将 isStockLimit 移到 methods 中\n\t\tisStockLimit(categoryIndex, productIndex) {\n\t\t\tconst product = this.categories[categoryIndex]?.items[productIndex];\n\t\t\tif (!product) return true;\n\n\t\t\tconst cartItem = this.cartList.find(item => \n\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\titem.productIndex === productIndex\n\t\t\t);\n\n\t\t\treturn cartItem ? cartItem.quantity >= product.stock : false;\n\t\t},\n\t\t\n\t\t// 修改索商品方法\n\t\tsearchProducts() {\n\t\t\tif (!this.searchKeyword.trim()) {\n\t\t\t\tthis.isSearching = false;\n\t\t\t\tthis.searchResults = [];\n\t\t\t\tthis.enableScroll();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isSearching = true;\n\t\t\tthis.searchResults = [];\n\t\t\tthis.disableScroll();\n\n\t\t\t// 搜索逻辑，增加品牌筛选\n\t\t\tthis.categories.forEach((category, categoryIndex) => {\n\t\t\t\tconst filteredItems = category.items.filter(product => {\n\t\t\t\t\t// 同时满足搜索关键词和品牌筛选条件\n\t\t\t\t\tconst matchesKeyword = product.name.toLowerCase().includes(this.searchKeyword.toLowerCase());\n\t\t\t\t\tconst matchesBrand = this.selectedBrand === 'all' || product.brand === this.selectedBrand;\n\t\t\t\t\treturn matchesKeyword && matchesBrand;\n\t\t\t\t});\n\n\t\t\t\tconst results = filteredItems.map((product, productIndex) => ({\n\t\t\t\t\t...product,\n\t\t\t\t\tcategoryIndex,\n\t\t\t\t\tproductIndex\n\t\t\t\t}));\n\t\t\t\tthis.searchResults.push(...results);\n\t\t\t});\n\n\t\t\tif (this.searchResults.length === 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '暂无相关商品',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 修改清除搜索方法\n\t\tclearSearch() {\n\t\t\tthis.searchKeyword = '';\n\t\t\tthis.isSearching = false;\n\t\t\tthis.searchResults = [];\n\t\t\tthis.enableScroll();\n\t\t},\n\t\t\n\t\t// 拉加载更多\n\t\tonReachBottom() {\n\t\t\tif (this.loading || !this.hasMore) return\n\t\t\tthis.loading = true\n\t\t\t\n\t\t\t// 模拟加载更多数据\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.page++\n\t\t\t\tif (this.page >= 3) {\n\t\t\t\t\tthis.hasMore = false\n\t\t\t\t}\n\t\t\t\tthis.loading = false\n\t\t\t}, 1000)\n\t\t},\n\t\t\n\t\t// 存购车数到本地存储\n\t\tsaveCartData() {\n\t\t\tuni.setStorageSync('cartData', JSON.stringify(this.cartList))\n\t\t},\n\t\t\n\t\t// 修改跳转到详页方法\n\t\tgoToDetail(item, categoryIndex, productIndex) {\n\t\t\tconst productInfo = this.isSearching ? item : this.categories[categoryIndex].items[productIndex];\n\t\t\t\n\t\t\tif (!productInfo) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '商品信息不完整',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 将商品详情数据存储到本地\n\t\t\tuni.setStorageSync('currentProductDetail', productInfo.detail);\n\t\t\t\n\t\t\t// 构建查询参数\n\t\t\tconst query = {\n\t\t\t\tid: productInfo.id,\n\t\t\t\tcategoryIndex: categoryIndex,  // 确保���递这个\n\t\t\t\tproductIndex: productIndex,    // 确保传递这个\n\t\t\t\tname: productInfo.name,\n\t\t\t\tprice: productInfo.price,\n\t\t\t\tstock: productInfo.stock,\n\t\t\t\timage: productInfo.image\n\t\t\t};\n\t\t\t\n\t\t\tconst queryString = Object.keys(query)\n\t\t\t\t.map(key => `${key}=${encodeURIComponent(query[key])}`)\n\t\t\t\t.join('&');\n\t\t\t\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/productDetail/productDetail?${queryString}`\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 修改 handleAddToCart 方法\n\t\thandleAddToCart(categoryIndex, productIndex, event) {\n\t\t\t// 先检查是否达到库限制\n\t\t\tif (this.isStockLimit(categoryIndex, productIndex)) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '已达到库存上限',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 如果是从购物车弹层点直接添加商品\n\t\t\tif (!event || !event.touches) {\n\t\t\t\tthis.addToCart(categoryIndex, productIndex);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 以下是带动画效果的添商逻辑\n\t\t\tconst touch = event.touches[0];\n\t\t\t\n\t\t\t// 使用uni的API获取购物车图标位置\n\t\t\tconst query = uni.createSelectorQuery();\n\t\t\tquery.select('.cart-icon').boundingClientRect(data => {\n\t\t\t\tif (!data) return;\n\n\t\t\t\tthis.cartDot = {\n\t\t\t\t\tshow: true,\n\t\t\t\t\tx: touch.clientX,\n\t\t\t\t\ty: touch.clientY,\n\t\t\t\t\ttranslateX: 0,\n\t\t\t\t\ttranslateY: 0,\n\t\t\t\t\topacity: 1\n\t\t\t\t};\n\n\t\t\t\tconst endX = data.left + data.width/2 - touch.clientX;\n\t\t\t\tconst endY = data.top + data.height/2 - touch.clientY;\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.cartDot = {\n\t\t\t\t\t\t...this.cartDot,\n\t\t\t\t\t\ttranslateX: endX,\n\t\t\t\t\t\ttranslateY: endY,\n\t\t\t\t\t\topacity: 0\n\t\t\t\t\t};\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.cartDot.show = false;\n\t\t\t\t\t\tthis.addToCart(categoryIndex, productIndex);\n\t\t\t\t\t}, 500);\n\t\t\t\t}, 50);\n\t\t\t}).exec();\n\t\t},\n\t\t\n\t\t// 计算高度的法也需要修改\n\t\tcalculateHeight() {\n\t\t\tlet height = 0;\n\t\t\tthis.heightArr = [];\n\t\t\tconst pxRatio = uni.getSystemInfoSync().windowWidth / 750;\n\t\t\t\n\t\t\tthis.filteredCategories.forEach((category, index) => {\n\t\t\t\tconst titleHeight = 88 * pxRatio;\n\t\t\t\tconst itemsHeight = (category.items?.length || 0) * ITEM_HEIGHT * pxRatio;\n\t\t\t\tconst categoryGap = 20 * pxRatio;\n\t\t\t\t\n\t\t\t\theight += titleHeight + itemsHeight + categoryGap;\n\t\t\t\tthis.heightArr.push(Math.round(height));\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 修改处理数量输入的方法\n\t\thandleQuantityInput(event, categoryIndex, productIndex) {\n\t\t\tconst value = event.detail.value;\n\t\t\t// 允许输入数字，去除小数点\n\t\t\tconst numValue = value.replace(/\\D/g, '');\n\t\t\t\n\t\t\tconst cartItem = this.cartList.find(item => \n\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\titem.productIndex === productIndex\n\t\t\t);\n\t\t\t\n\t\t\tif (!cartItem) return;\n\t\t\t\n\t\t\t// 允许输入框为空，此时不更新购物车总价和数量\n\t\t\tif (numValue === '') {\n\t\t\t\tcartItem._tempValue = '';  // 使用临时值存储空字符串\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconst newQuantity = parseInt(numValue);\n\t\t\t\n\t\t\t// 如果输入0，直接除商品\n\t\t\tif (newQuantity === 0) {\n\t\t\t\tconst index = this.cartList.findIndex(item => \n\t\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\t\titem.productIndex === productIndex\n\t\t\t\t);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis.cartList.splice(index, 1);\n\t\t\t\t}\n\t\t\t\tthis.updateCartInfo();\n\t\t\t\tthis.saveCartData();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconst product = this.categories[categoryIndex].items[productIndex];\n\t\t\tconst stock = product.stock;\n\t\t\t\n\t\t\t// 限制最大量不超过库\n\t\t\tif (newQuantity > stock) {\n\t\t\t\tcartItem.quantity = stock;\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: `已达到库存上限${stock}件`,\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcartItem.quantity = newQuantity;\n\t\t\t}\n\t\t\t\n\t\t\tdelete cartItem._tempValue;  // 清除临时值\n\t\t\tthis.updateCartInfo();\n\t\t\tthis.saveCartData();\n\t\t},\n\t\t\n\t\t// 修改处理输入框失焦的方法\n\t\thandleQuantityBlur(categoryIndex, productIndex) {\n\t\t\tconst cartItem = this.cartList.find(item => \n\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\titem.productIndex === productIndex\n\t\t\t);\n\t\t\t\n\t\t\tif (cartItem) {\n\t\t\t\t// 如果是空值或0，移除商品\n\t\t\t\tif (cartItem._tempValue === '' || cartItem.quantity === 0) {\n\t\t\t\t\tconst index = this.cartList.findIndex(item => \n\t\t\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\t\t\titem.productIndex === productIndex\n\t\t\t\t\t);\n\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\tthis.cartList.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\tthis.updateCartInfo();\n\t\t\t\t\tthis.saveCartData();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 清除临时\n\t\t\t\tdelete cartItem._tempValue;\n\t\t\t\t\n\t\t\t\t// 确保数量是有效数字\n\t\t\t\tcartItem.quantity = parseInt(cartItem.quantity) || 1;\n\t\t\t\tthis.updateCartInfo();\n\t\t\t\tthis.saveCartData();\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 修改品牌选择方法\n\t\tselectBrand(brandId) {\n\t\t\tthis.selectedBrand = brandId;\n\t\t\t\n\t\t\t// 如果正在搜索，新执行搜索以应用新的品��筛\n\t\t\tif (this.isSearching) {\n\t\t\t\tthis.searchProducts();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 不在搜索状态时的原有逻辑\n\t\t\tthis.currentCategory = 0;\n\t\t\tthis.scrollTop = 0;\n\t\t},\n\t\t\n\t\t// 添加 loadCartCount 方法\n\t\tloadCartCount() {\n\t\t\tconst cartData = uni.getStorageSync('cartData')\n\t\t\tif (cartData) {\n\t\t\t\tconst cartList = JSON.parse(cartData)\n\t\t\t\tthis.cartCount = cartList.reduce((total, item) => total + item.quantity, 0)\n\t\t\t} else {\n\t\t\t\tthis.cartCount = 0\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 添加 updateCartList 方\n\t\tupdateCartList() {\n\t\t\tconst cartData = uni.getStorageSync('cartData')\n\t\t\tif (cartData) {\n\t\t\t\tthis.cartList = JSON.parse(cartData)\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 添加搜索结果的刷新方法\n\t\tonSearchRefresh() {\n\t\t\tif (this.refreshing) return;\n\t\t\tthis.refreshing = true;\n\t\t\t\n\t\t\t// 重新执行搜索\n\t\t\tthis.searchProducts();\n\t\t\t\n\t\t\t// 延迟关闭刷新状态\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.refreshing = false;\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '刷新成功',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t},\n\t\t// 获取店铺详情\n\t\tgetShopDetail() {\n\t\t\t// 这里添加获取店铺详情的接口请求\n\t\t\t// 示例：\n\t\t\t// uni.request({\n\t\t\t//   url: '/api/shop/detail',\n\t\t\t//   data: { id: this.shopId },\n\t\t\t//   success: (res) => {\n\t\t\t//     this.merchantId = res.data.merchantId\n\t\t\t//   }\n\t\t\t// })\n\t\t},\n\t\t// 添加禁用/启用滚动方法\n\t\tdisableScroll() {\n\t\t\t// 可以根据需要添加额外的滚动控制逻辑\n\t\t\tthis.scrollTop = 0;\n\t\t},\n\t\tenableScroll() {\n\t\t\t// 可以根据需要加额外的滚动控制逻辑\n\t\t}\n\t},\n\tcreated() {\n\t\t// 在组件创建时应用节流\n\t\tthis.switchCategory = throttle(this.switchCategory, 200);\n\t},\n\tonShow() {\n\t\t// 每次显示页面时重新加载购物车数据\n\t\tconst cartData = uni.getStorageSync('cartData')\n\t\tif (cartData) {\n\t\t\tthis.cartList = JSON.parse(cartData)\n\t\t\tthis.updateCartInfo()\n\t\t}\n\t},\n\t// 添加 onPullDownRefresh 生命周期方法（与 methods 级）\n\tonPullDownRefresh() {\n\t\t// 如果正在搜索状态，刷新搜索结果\n\t\tif (this.isSearching) {\n\t\t\tthis.searchProducts();\n\t\t}\n\t\t\n\t\t// 延迟关闭下拉刷新\n\t\tsetTimeout(() => {\n\t\t\t\tuni.stopPullDownRefresh();\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '刷新成功',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}, 1000);\n\t}\n}\n</script>\n\n<style>\n.container {\n\theight: 100vh;\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n\tpadding-bottom: 110rpx;\n}\n\n.search-bar {\n\tpadding: 20rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tbackground-color: #f0f2f7;\n}\n\n.search-input {\n\tflex: 1;\n\theight: 70rpx;\n\tbackground: #fff;\n\tborder-radius: 35rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 0 30rpx;\n\tmargin-right: 20rpx;\n}\n\n.search-input .icon-search {\n\tfont-size: 32rpx;\n\tcolor: #999;\n\tmargin-right: 10rpx;\n}\n\n.search-input input {\n\tflex: 1;\n\tfont-size: 28rpx;\n}\n\n.merchant-entry {\n\tdisplay: flex;\n\talign-items: center;\n\tfont-size: 32rpx;\n\tcolor: #333;\n\tgap: 10rpx;\n}\n\n.merchant-entry .merchant-icon {\n\twidth: 44rpx;\n\theight: 44rpx;\n\tmargin-left: 0;\n}\n\n.main-content {\n\tflex: 1;\n\tdisplay: flex;\n\toverflow: hidden;\n\tbackground: #fff;\n\theight: 0;\n\tvisibility: visible;\n}\n\n.main-content.hidden {\n\tvisibility: hidden;\n}\n\n.category-list {\n\twidth: 180rpx;\n\tbackground: #f7f7f7;\n\theight: 100%;\n\tmargin: 0;\n\tpadding: 0;\n}\n\n.category-item {\n\theight: 100rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 28rpx;\n\tcolor: #333;\n}\n\n.category-item.active {\n\tbackground: #fff;\n\tcolor: #007AFF;\n\tborder-left: 4rpx solid #007AFF;\n}\n\n.product-list {\n\tflex: 1;\n\theight: 100%;\n\tbackground-color: #fff;\n\tposition: relative;\n}\n\n.category-wrapper {\n\tbackground: #fff;\n}\n\n.category-section-title {\n\theight: 72rpx;\n\tline-height: 72rpx;\n\tpadding: 0 20rpx;\n\tfont-size: 28rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n\tbackground-color: #fff;\n\tposition: sticky;\n\ttop: 0;\n\tz-index: 10;\n\tbox-sizing: border-box;\n\ttransform: translateZ(0);\n\twill-change: transform;\n}\n\n.product-items {\n\tpadding: 0 20rpx;\n}\n\n.product-item {\n\tdisplay: flex;\n\theight: 200rpx;\n\tpadding: 20rpx 0;\n\tbox-sizing: border-box;\n\tborder-bottom: 1rpx solid #f5f5f5;\n}\n\n.product-item image {\n\twidth: 160rpx;\n\theight: 160rpx;\n\tmargin-right: 20rpx;\n}\n\n.product-info {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n}\n\n.product-info-top {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 10rpx;\n}\n\n.product-name {\n\tfont-size: 28rpx;\n\tcolor: #333;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tdisplay: -webkit-box;\n\t-webkit-line-clamp: 2;\n\t-webkit-box-orient: vertical;\n\tword-break: break-all;\n}\n\n.product-stock {\n\tfont-size: 24rpx;\n\tcolor: #999;\n}\n\n.product-price-wrap {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tposition: relative;\n\tz-index: 1;\n\twidth: 100%;\n\tpadding-right: 20rpx;\n\theight: 56rpx;\n\ttransform: translateZ(0);\n}\n\n.price {\n\tcolor: #FF9B49;\n\tfont-size: 32rpx;\n\tposition: relative;\n\tz-index: 1;\n\tflex-shrink: 0;\n}\n\n.add-btn,\n.plus {\n\twidth: 56rpx;\n\theight: 56rpx;\n\tmin-width: 56rpx;\n\tmin-height: 56rpx;\n\tbackground-color: transparent;\n\tcolor: #fff;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 32rpx;\n\tline-height: 1;\n\tpadding: 0;\n\ttext-align: center;\n\tposition: relative;\n\tflex-shrink: 0;\n\ttransform: translateZ(0);\n\tuser-select: none;\n\t-webkit-user-select: none;\n\ttouch-action: manipulation;\n\tmargin-right: 11rpx;\n\tmargin-bottom: 4rpx;\n\tz-index: 2;\n\tisolation: isolate;\n}\n\n.add-btn::before,\n.plus::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\theight: 56rpx;\n\twidth: 56rpx;\n\tbackground: url('/static/products/jiahao.png') no-repeat center center;\n\tbackground-size: contain;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.add-btn:empty,\n.plus:empty {\n\tfont-size: 0;\n}\n\n.cart-bar {\n\theight: 110rpx;\n\tbackground: #fff;\n\tborder-top: 1rpx solid #eee;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 8rpx 30rpx;\n}\n\n.cart-left {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tgap: 30rpx;\n}\n\n.cart-icon {\n\tposition: relative;\n\tmargin: 0 30rpx;\n\twidth: 50rpx;\n\theight: 50rpx;\n}\n\n.cart-image {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.cart-badge {\n\tposition: absolute;\n\ttop: -10rpx;\n\tright: -10rpx;\n\tbackground: #FF9B49;\n\tcolor: #fff;\n\tfont-size: 20rpx;\n\tpadding: 0 10rpx;\n\tborder-radius: 20rpx;\n\tmin-width: 28rpx;\n\theight: 28rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.cart-right {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.total-price {\n\tcolor: #FF9B49;\n\tfont-size: 36rpx;\n\tmargin-right: 30rpx;\n}\n\n.checkout-btn {\n\tbackground: #FF9B49;\n\tcolor: #fff;\n\tpadding: 20rpx 40rpx;\n\tborder-radius: 40rpx;\n}\n\n.quantity-control {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground: #f5f5f5;\n\tborder-radius: 24rpx;\n\theight: 56rpx;\n\tflex-shrink: 0;\n\twidth: 160rpx;\n\tmargin-right: 14rpx;\n\tposition: relative;\n\tz-index: 2;\n\tisolation: isolate;\n\ttransform: translateZ(0);\n\t-webkit-tap-highlight-color: transparent;\n\tpadding-top: 4rpx;\n}\n\n.quantity-control .minus,\n.quantity-control .plus {\n\twidth: 56rpx;\n\theight: 56rpx;\n\tmin-width: 56rpx;\n\tmin-height: 56rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcolor: #333;\n\tflex-shrink: 0;\n\tuser-select: none;\n\t-webkit-user-select: none;\n\ttouch-action: manipulation;\n\tfont-size: 32rpx;\n\tposition: relative;\n\ttop: -2rpx;\n}\n\n.quantity-control .num {\n\tmin-width: 48rpx;\n\twidth: 48rpx;\n\ttext-align: center;\n\tfont-size: 28rpx;\n\tcolor: #333;\n\tmargin: 0;\n\tflex-shrink: 0;\n\tbackground: transparent;\n\tborder: none;\n\tpadding: 0;\n\theight: 56rpx;\n\tline-height: 54rpx;\n\tposition: relative;\n\ttop: -2rpx;\n}\n\n/* 去除输入框聚焦时的默认样式 */\n.quantity-control .num:focus {\n\toutline: none;\n}\n\n.add-btn.disabled,\n.plus.disabled {\n\tbackground-color: transparent;\n\tpointer-events: none;\n\topacity: 0.6;\n\tcursor: not-allowed;\n}\n\n/* 保留一个完整的禁用状态式 */\n.add-btn.disabled,\n.plus.disabled {\n\tbackground-color: transparent;\n\tpointer-events: none;\n\topacity: 0.6;\n\tcursor: not-allowed;\n}\n\n/* 保留结算按钮的禁用样式 */\n.checkout-btn.disabled {\n\tbackground-color: #ccc;\n\tpointer-events: none;\n}\n\n/* 购车弹出层样式 */\n.cart-popup {\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\tz-index: 999;\n}\n\n.cart-mask {\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\tbackground: rgba(0, 0, 0, 0.5);\n}\n\n.cart-content {\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: #fff;\n\tborder-radius: 20rpx 20rpx 0 0;\n\tmin-height: 300rpx;\n\tmax-height: 70vh;\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n\tpadding: 0 20rpx;\n}\n\n.cart-header {\n\tpadding: 30rpx;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tborder-bottom: 1rpx solid #eee;\n}\n\n.header-left {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.cart-header .title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n}\n\n.cart-header .cart-count {\n\tfont-size: 24rpx;\n\tcolor: #666;\n\tmargin-left: 10rpx;\n\tfont-weight: normal;\n}\n\n.cart-header .clear {\n\tfont-size: 28rpx;\n\tcolor: #999;\n}\n\n.cart-list {\n\tflex: 1;\n\tpadding: 0 10rpx;\n\tmax-height: calc(70vh - 200rpx);\n\toverflow-y: auto;\n}\n\n.cart-item {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 20rpx 0;\n\tborder-bottom: 1rpx solid #eee;\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n\n.cart-item image {\n\twidth: 120rpx;\n\theight: 120rpx;\n\tmargin-right: 20rpx;\n\tflex-shrink: 0;\n}\n\n.item-info {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\tmin-width: 0;\n\tmargin-right: 20rpx;\n\tmax-width: calc(100% - 280rpx);\n}\n\n.item-name {\n\tfont-size: 28rpx;\n\tcolor: #333;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n\n.item-price {\n\tfont-size: 32rpx;\n\tcolor: #FF9B49;\n\tmargin-top: 10rpx;\n}\n\n/* 修改购物车中的数量控制器样式 */\n.cart-item .quantity-control {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\theight: 48rpx;\n\tflex-shrink: 0;\n\twidth: 140rpx;\n\tmargin-left: auto;\n\tbox-sizing: border-box;\n}\n\n.cart-item .quantity-control .minus,\n.cart-item .quantity-control .plus {\n\twidth: 48rpx;\n\theight: 48rpx;\n\tmin-width: 48rpx;\n\tmin-height: 48rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tflex-shrink: 0;\n\tfont-size: 32rpx;\n}\n\n.cart-item .quantity-control .num {\n\tmin-width: 44rpx;\n\ttext-align: center;\n\tfont-size: 28rpx;\n\tcolor: #333;\n\tmargin: 0;\n\tflex-shrink: 0;\n}\n\n/* 修改物车样式 */\n.cart-wrap {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin: 0;\n}\n\n.cart-icon {\n    position: relative;\n    width: 50rpx;\n    height: 50rpx;\n}\n\n.cart-text {\n    font-size: 24rpx;\n    color: #666;\n    margin-top: 4rpx;\n}\n\n/* 添加问商家样式 */\n.message-wrap {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.message-image {\n    width: 50rpx;\n    height: 50rpx;\n}\n\n.message-text {\n    font-size: 24rpx;\n    color: #666;\n    margin-top: 4rpx;\n}\n\n/* 添加禁用态样式 */\n.add-btn.disabled,\n.plus.disabled {\n\tbackground-color: transparent;\n\tpointer-events: none;\n\topacity: 0.6;\n\tcursor: not-allowed;\n}\n\n.checkout-btn.disabled {\n\tbackground-color: #ccc;\n\tpointer-events: none;\n}\n\n/* 修改库存显样式 */\n.product-stock {\n\tfont-size: 24rpx;\n\tcolor: #999;\n}\n\n.product-stock.low {\n\tcolor: #ff6b6b;\n}\n\n/* 添加搜索相样 */\n.clear-icon {\n\tfont-size: 40rpx;\n\tcolor: #999;\n\tpadding: 0 10rpx;\n\theight: 40rpx;\n\tline-height: 40rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.search-results {\n\tflex: 0 1 auto;\n\tbackground: #fff;\n\tpadding: 0 20rpx;\n\tmin-height: 0;\n\theight: auto;\n}\n\n.loading-more,\n.no-more {\n\ttext-align: center;\n\tpadding: 20rpx;\n\tcolor: #999;\n\tfont-size: 24rpx;\n\tmargin: 0 20rpx;\n}\n\n/* 修改动画样 */\n.add-to-cart-animation {\n\tposition: fixed;\n\tz-index: 999;\n\tpointer-events: none;\n}\n\n.cart-dot {\n\twidth: 20rpx;\n\theight: 20rpx;\n\tbackground: #ff6b6b;\n\tborder-radius: 50%;\n\tbox-shadow: 0 0 10rpx rgba(255, 107, 107, 0.5);\n}\n\n/* 物车图标样 */\n.cart-icon {\n\tposition: relative;\n\twidth: 50rpx;\n\theight: 50rpx;\n\ttransition: transform 0.3s ease-out;\n}\n\n/* 购物车动画样式 */\n.cart-dot-wrap {\n\tposition: fixed;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tpointer-events: none;\n\tz-index: 999;\n}\n\n.cart-dot {\n\tposition: absolute;\n\twidth: 20rpx;\n\theight: 20rpx;\n\tbackground: #ff6b6b;\n\tborder-radius: 50%;\n\tbox-shadow: 0 0 10rpx rgba(255, 107, 107, 0.5);\n\ttransition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n/* 购物车图标动画 */\n.cart-icon {\n\tposition: relative;\n\twidth: 50rpx;\n\theight: 50rpx;\n\ttransition: transform 0.3s ease-out;\n}\n\n.cart-icon.animate {\n\tanimation: cartScale 0.3s ease-out;\n}\n\n@keyframes cartScale {\n\t0% { transform: scale(1); }\n\t50% { transform: scale(1.2); }\n\t100% { transform: scale(1); }\n}\n\n/* 添加购物车空状态式 */\n.cart-empty {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 60rpx 0;\n}\n\n.empty-image {\n    width: 200rpx;\n    height: 200rpx;\n    margin-bottom: 20rpx;\n}\n\n.empty-text {\n    font-size: 28rpx;\n    color: #999;\n}\n\n/* 添加全局重置 */\n* {\n\tmargin: 0;\n\tpadding: 0;\n\tbox-sizing: border-box;\n}\n\n/* 修改滚动容样式 */\n::-webkit-scrollbar {\n\twidth: 0;\n\theight: 0;\n\tbackground: transparent;\n}\n\n.brand-filter {\n    display: flex;\n    align-items: center;\n    padding: 20rpx;\n    background-color: #fff;\n    border-bottom: 1rpx solid #f0f2f7;\n}\n\n.brand-label {\n    font-size: 28rpx;\n    color: #333;\n    margin: 0 20rpx;\n    white-space: nowrap;\n}\n\n.brand-scroll {\n    flex: 1;\n    white-space: nowrap;\n    width: 100%;\n    overflow-x: scroll;\n}\n\n.brand-list {\n    display: inline-flex;\n    padding-right: 40rpx;\n}\n\n.brand-item {\n    display: inline-block;\n    padding: 10rpx 30rpx;\n    margin-right: 20rpx;\n    font-size: 26rpx;\n    color: #666;\n    background: #f7f7f7;\n    border-radius: 26rpx;\n    transition: all 0.3s;\n    flex-shrink: 0;\n}\n\n.brand-item:last-child {\n    margin-right: 0;\n}\n\n.brand-item.active {\n    color: #fff;\n    background: #007AFF;\n}\n\n/* 修改搜果中的 add-btn 样式 */\n.search-results .product-price-wrap {\n    padding-right: 20rpx;\n}\n\n.search-results .add-btn,\n.search-results .quantity-control {\n    margin-right: 20rpx;\n}\n\n/* 搜索结为空时的样式 */\n.search-results:empty {\n    display: none;\n}\n\n/* 统一搜索结果中的商品项样式 */\n.search-results .product-item {\n    display: flex;\n    padding: 20rpx 0;\n    border-bottom: 1rpx solid #f5f5f5;\n    height: 200rpx;\n    box-sizing: border-box;\n}\n\n.search-results .product-info {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding-right: 20rpx;\n    position: relative;\n}\n\n.search-results .product-price-wrap {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    position: relative;\n    z-index: 1;\n    width: 100%;\n    padding-right: 0; /* 移除内边距，因为已经在 product-info 中设置了 */\n    margin-bottom: 10rpx; /* 添加底部间距，使按钮对齐 */\n}\n\n.search-results .add-btn,\n.search-results .quantity-control {\n    position: absolute; /* 使用绝对定位 */\n    right: 20rpx; /* 右对齐 */\n    bottom: 0; /* 底部对齐 */\n}\n\n.my-quantity-control {\n\tright: 15rpx !important\n}\n\n.my-add-btn {\n\tright: 10rpx !important\n}\n\n.search-results-container {\n\tposition: fixed;\n\ttop: 200rpx; /* 根据顶部搜索栏和品牌筛选的实际高度调整 */\n\tleft: 0;\n\tright: 0;\n\tbottom: 110rpx; /* 购物车栏的高度 */\n\tz-index: 10;\n\tbackground: #fff;\n}\n\n.search-results {\n\theight: 100%;\n\tbackground: #fff;\n\toverflow-y: auto;\n}\n\n.main-content {\n\tflex: 1;\n\tdisplay: flex;\n\toverflow: hidden;\n\tbackground: #fff;\n\theight: 0;\n\tvisibility: visible;\n}\n\n.main-content.hidden {\n\tvisibility: hidden;\n}\n</style> ","import mod from \"-!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1733481745239\n      var cssReload = require(\"D:/HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}