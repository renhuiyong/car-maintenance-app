{"version":3,"sources":["uni-app:///pages/productDetail/productDetail.vue","webpack:///D:/HBuilderProjects/car-maintenance-app/pages/productDetail/productDetail.vue?7cc3","webpack:///D:/HBuilderProjects/car-maintenance-app/pages/productDetail/productDetail.vue?816c","uni-app:///main.js","webpack:///D:/HBuilderProjects/car-maintenance-app/pages/productDetail/productDetail.vue?d9b3","webpack:///D:/HBuilderProjects/car-maintenance-app/pages/productDetail/productDetail.vue?268d","webpack:///D:/HBuilderProjects/car-maintenance-app/pages/productDetail/productDetail.vue?e1d2","webpack:///D:/HBuilderProjects/car-maintenance-app/pages/productDetail/productDetail.vue?2724"],"names":["data","product","id","name","price","image","detail","categoryIndex","productIndex","stock","cartCount","isFavorite","showCartPopup","cartList","totalPrice","onLoad","console","uni","methods","loadCartCount","addToCart","item","title","icon","existItem","quantity","buyNow","goToCart","url","handleImageError","toggleFavorite","contactSeller","showCart","hideCart","clearCart","content","success","removeFromCart","handleAddToCart","isStockLimit","handleQuantityInput","cartItem","handleQuantityBlur","updateCartList","onShow","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eA+FA;EACAA;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;;IAEA;IACA;IAEA;MACAd;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;IAEAO;IACA;;IAEA;IACAC;EACA;EACAC;IACA;IACAC;MACA;MACA;QACA;QACA;UAAA;QAAA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;MAEA;QAAA,OACAC,sDACAA;MAAA,EACA;MAEA;QACA;UACAJ;YACAK;YACAC;UACA;UACA;QACA;QACAC;MACA;QACAX;UACAX;UACAK;UACAC;UACAL;UACAC;UACAC;UACAI;UACAgB;QACA;MACA;MAEAR;MACA;MACA;MAEAA;QACAK;QACAC;MACA;IACA;IAEA;IACAG;MACA;MACAT;QACAK;QACAC;MACA;IACA;IAEA;IACAI;MACAV;QACAW;MACA;IACA;IAEAC;MACAb;MACA;MACA;IACA;IAEA;IACAc;MACA;MACAb;QACAK;QACAC;MACA;IACA;IAEA;IACAQ;MACAd;QACAK;QACAC;MACA;IACA;IAEA;IACAS;MACA;MACA;MACA;QACA;QACA;QACA;UAAA;QAAA;MACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MACAjB;QACAK;QACAa;QACAC;UACA;YACA;YACA;YACA;YACAnB;YACA;UACA;QACA;MACA;IACA;IAEA;IACAoB;MACA;MACA;MAEA;QAAA,OACAhB,wCACAA;MAAA,EACA;MAEA;QACA;UACAR;QACA;UACAA;QACA;QACAI;QACA;QACA;MACA;IACA;IAEA;IACAqB;MACA;MACA;MAEA;QAAA,OACAjB,wCACAA;MAAA,EACA;MAEA;QACA;UACAJ;YACAK;YACAC;UACA;UACA;QACA;QACAC;QACAP;QACA;QACA;MACA;IACA;IAEA;IACAsB;MACA;QAAA,OACAlB,wCACAA;MAAA,EACA;MACA;IACA;IAEA;IACAmB;MACA;MACA;MAEA;MACA;MAEA;QAAA,OACAnB,wCACAA;MAAA,EACA;MAEA;MAEA;QACAoB;QACA;MACA;MAEA;MAEA;QACA5B;UAAA,OACA,0CACAQ;QAAA,EACA;QACAJ;QACA;QACA;QACA;MACA;MAEA;QACAwB;QACAxB;UACAK;UACAC;QACA;MACA;QACAkB;MACA;MAEA;MACAxB;MACA;MACA;IACA;IAEA;IACAyB;MACA;MACA;MAEA;QAAA,OACArB,wCACAA;MAAA,EACA;MAEA;QACA;UACAR;YAAA,OACA,0CACAQ;UAAA,EACA;QACA;UACAoB;QACA;QACA;QACAxB;QACA;QACA;MACA;IACA;IAEA;IACA0B;MACA;MACA;QACA;QACA;QACA;UAAA;QAAA;MACA;IACA;EACA;EACAC;IACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxZA;AAAA;AAAA;AAAA;AAA4iC,CAAgB,2hCAAG,EAAC,C;;;;;;;;;;;ACAhkC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAGA;AACA;AAHA;AACAC,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,sBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0H;AAC1H;AACiE;AACL;AACa;;;AAGzE;AAC4L;AAC5L,gBAAgB,sMAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAuuB,CAAgB,ovBAAG,EAAC,C","file":"pages/productDetail/productDetail.js","sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<!-- 商品详情 -->\n\t\t<view class=\"product-info\">\n\t\t\t<image class=\"product-image\" :src=\"product.image\" mode=\"aspectFit\" @error=\"handleImageError\"></image>\n\t\t\t<view class=\"info-content\">\n\t\t\t\t<view class=\"info-header\">\n\t\t\t\t\t<view class=\"info-left\">\n\t\t\t\t\t\t<view class=\"title\">{{ product.name }}</view>\n\t\t\t\t\t\t<view class=\"price\">¥{{ product.price }}/件</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"info-right\">\n\t\t\t\t\t\t<view class=\"favorite-btn\" @tap=\"toggleFavorite\">\n\t\t\t\t\t\t\t<image class=\"favorite-icon\" src=\"/static/products/shoucang.png\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<text class=\"stock\">库存88</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 商品详情 -->\n\t\t<view class=\"detail-section\">\n\t\t\t<view class=\"section-title\">商品详情</view>\n\t\t\t<view class=\"detail-content\">\n\t\t\t\t<rich-text :nodes=\"product.detail || '暂无商品详情'\" :style=\"{wordBreak: 'break-all'}\"></rich-text>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 底部操作栏 -->\n\t\t<view class=\"bottom-bar\">\n\t\t\t<view class=\"left-btns\">\n\t\t\t\t<view class=\"icon-btn\" @tap=\"contactSeller\">\n\t\t\t\t\t<image class=\"icon-image\" src=\"/static/products/wenshangjai.png\"></image>\n\t\t\t\t\t<text class=\"btn-text\">问商家</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"icon-btn\" @tap=\"showCart\">\n\t\t\t\t\t<image class=\"icon-image\" src=\"/static/products/cart.png\"></image>\n\t\t\t\t\t<text class=\"btn-text\">购物车</text>\n\t\t\t\t\t<text class=\"badge\" v-if=\"cartCount\">{{ cartCount }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"right-btns\">\n\t\t\t\t<view class=\"add-cart-btn\" @tap=\"addToCart\">加入购物车</view>\n\t\t\t\t<view class=\"buy-btn\" @tap=\"buyNow\">立即购买</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 添加购物车弹出层 -->\n\t\t<view class=\"cart-popup\" v-if=\"showCartPopup\">\n\t\t\t<view class=\"cart-mask\" @tap=\"hideCart\"></view>\n\t\t\t<view class=\"cart-content\">\n\t\t\t\t<view class=\"cart-header\">\n\t\t\t\t\t<view class=\"header-left\">\n\t\t\t\t\t\t<text class=\"title\">购物车</text>\n\t\t\t\t\t\t<text class=\"cart-count\" v-if=\"cartCount\">(共{{ cartCount }}件商品)</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"clear\" v-if=\"cartList.length > 0\" @tap=\"clearCart\">清空购物车</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"cart-empty\" v-if=\"cartList.length === 0\">\n\t\t\t\t\t<image src=\"/static/products/empty_cart.png\" mode=\"aspectFit\" class=\"empty-image\"></image>\n\t\t\t\t\t<text class=\"empty-text\">购物车还是空的</text>\n\t\t\t\t</view>\n\t\t\t\t<scroll-view scroll-y class=\"cart-list\" v-else>\n\t\t\t\t\t<view class=\"cart-item\" v-for=\"(item, index) in cartList\" :key=\"item.id\">\n\t\t\t\t\t\t<image :src=\"item.image\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t<view class=\"item-info\">\n\t\t\t\t\t\t\t<text class=\"item-name\">{{ item.name }}</text>\n\t\t\t\t\t\t\t<view class=\"item-bottom\">\n\t\t\t\t\t\t\t\t<text class=\"item-price\">￥{{ item.price }}</text>\n\t\t\t\t\t\t\t\t<view class=\"quantity-control\">\n\t\t\t\t\t\t\t\t\t<text class=\"minus\" @tap.stop=\"removeFromCart(item.categoryIndex, item.productIndex)\">-</text>\n\t\t\t\t\t\t\t\t\t<text class=\"num\">{{ item.quantity }}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"plus\" \n\t\t\t\t\t\t\t\t\t\t:class=\"{ disabled: isStockLimit(item.categoryIndex, item.productIndex) }\"\n\t\t\t\t\t\t\t\t\t\t@tap.stop=\"handleAddToCart(item.categoryIndex, item.productIndex)\">+</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</scroll-view>\n\t\t\t\t<!-- 添加底部结算 -->\n\t\t\t\t<view class=\"cart-footer\" v-if=\"cartList.length > 0\">\n\t\t\t\t\t<view class=\"total\">\n\t\t\t\t\t\t<text>合计：</text>\n\t\t\t\t\t\t<text class=\"price\">￥{{ totalPrice }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"checkout-btn\" @tap=\"goToCheckout\">去结算</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tproduct: {\n\t\t\t\tid: '',\n\t\t\t\tname: '',\n\t\t\t\tprice: 0,\n\t\t\t\timage: '',\n\t\t\t\tdetail: '',\n\t\t\t\tcategoryIndex: 0,\n\t\t\t\tproductIndex: 0,\n\t\t\t\tstock: 0\n\t\t\t},\n\t\t\tcartCount: 0,\n\t\t\tisFavorite: false,\n\t\t\tshowCartPopup: false,\n\t\t\tcartList: [],\n\t\t\ttotalPrice: 0\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tconsole.log('接收到的参数：', options);\n\t\t\n\t\t// 从本地存储获取商品详情\n\t\tconst detail = uni.getStorageSync('currentProductDetail');\n\t\t\n\t\tthis.product = {\n\t\t\tid: options.id,\n\t\t\tname: decodeURIComponent(options.name),\n\t\t\tprice: Number(options.price),\n\t\t\timage: decodeURIComponent(options.image),\n\t\t\tdetail: detail || '<div>暂无商品详情</div>',\n\t\t\tcategoryIndex: Number(options.categoryIndex),\n\t\t\tproductIndex: Number(options.productIndex),\n\t\t\tstock: Number(options.stock)\n\t\t};\n\t\t\n\t\tconsole.log('处理后的商品数据', this.product);\n\t\tthis.loadCartCount();\n\t\t\n\t\t// 清除本地存储的详情数据\n\t\tuni.removeStorageSync('currentProductDetail');\n\t},\n\tmethods: {\n\t\t// 加载购物车数量\n\t\tloadCartCount() {\n\t\t\tconst cartData = uni.getStorageSync('cartData')\n\t\t\tif (cartData) {\n\t\t\t\tconst cartList = JSON.parse(cartData)\n\t\t\t\tthis.cartCount = cartList.reduce((total, item) => total + item.quantity, 0)\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 加入购物车\n\t\taddToCart() {\n\t\t\tlet cartData = uni.getStorageSync('cartData')\n\t\t\tlet cartList = cartData ? JSON.parse(cartData) : []\n\t\t\t\n\t\t\tconst existItem = cartList.find(item => \n\t\t\t\titem.categoryIndex === this.product.categoryIndex && \n\t\t\t\titem.productIndex === this.product.productIndex\n\t\t\t);\n\n\t\t\tif (existItem) {\n\t\t\t\tif (existItem.quantity >= this.product.stock) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '已达到库存上限',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\texistItem.quantity += 1;\n\t\t\t} else {\n\t\t\t\tcartList.push({\n\t\t\t\t\tid: this.product.id,\n\t\t\t\t\tcategoryIndex: Number(this.product.categoryIndex),\n\t\t\t\t\tproductIndex: Number(this.product.productIndex),\n\t\t\t\t\tname: this.product.name,\n\t\t\t\t\tprice: this.product.price,\n\t\t\t\t\timage: this.product.image,\n\t\t\t\t\tstock: this.product.stock,\n\t\t\t\t\tquantity: 1\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tuni.setStorageSync('cartData', JSON.stringify(cartList));\n\t\t\tthis.loadCartCount();\n\t\t\tthis.updateCartList();\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '已加入购物车',\n\t\t\t\ticon: 'success'\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 立即购买\n\t\tbuyNow() {\n\t\t\t// TODO: 跳转到结算页\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '功能开发中',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 跳转到购物车\n\t\tgoToCart() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/shop/shop'  // 使用原来的shop页面路径\n\t\t\t})\n\t\t},\n\t\t\n\t\thandleImageError(e) {\n\t\t\tconsole.log('图片加载失败：', e);\n\t\t\t// 可以设置一个默认图片\n\t\t\tthis.product.image = '/static/default-product.png'\n\t\t},\n\t\t\n\t\t// 换收藏状态\n\t\ttoggleFavorite() {\n\t\t\tthis.isFavorite = !this.isFavorite;\n\t\t\tuni.showToast({\n\t\t\t\ttitle: this.isFavorite ? '已收藏' : '已取消收藏',\n\t\t\t\ticon: 'success'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 添加联系商家方法\n\t\tcontactSeller() {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '联系商家功能开发中',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 显示购物车\n\t\tshowCart() {\n\t\t\t// 从本地存储获取新的购物车数据\n\t\t\tconst cartData = uni.getStorageSync('cartData')\n\t\t\tif (cartData) {\n\t\t\t\tthis.cartList = JSON.parse(cartData)\n\t\t\t\t// 计算总价\n\t\t\t\tthis.totalPrice = this.cartList.reduce((total, item) => total + item.price * item.quantity, 0)\n\t\t\t}\n\t\t\tthis.showCartPopup = true\n\t\t},\n\t\t\n\t\t// 隐藏购物车\n\t\thideCart() {\n\t\t\tthis.showCartPopup = false\n\t\t},\n\t\t\n\t\t// 清空购物车\n\t\tclearCart() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定要清空购物车吗？',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tthis.cartList = []\n\t\t\t\t\t\tthis.cartCount = 0\n\t\t\t\t\t\tthis.totalPrice = 0\n\t\t\t\t\t\tuni.setStorageSync('cartData', '[]')\n\t\t\t\t\t\tthis.hideCart()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 修改移除商品方法\n\t\tremoveFromCart(categoryIndex, productIndex) {\n\t\t\tlet cartData = uni.getStorageSync('cartData')\n\t\t\tlet cartList = cartData ? JSON.parse(cartData) : []\n\t\t\t\n\t\t\tconst index = cartList.findIndex(item => \n\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\titem.productIndex === productIndex\n\t\t\t);\n\n\t\t\tif (index > -1) {\n\t\t\t\tif (cartList[index].quantity > 1) {\n\t\t\t\t\tcartList[index].quantity--;\n\t\t\t\t} else {\n\t\t\t\t\tcartList.splice(index, 1);\n\t\t\t\t}\n\t\t\t\tuni.setStorageSync('cartData', JSON.stringify(cartList));\n\t\t\t\tthis.loadCartCount();\n\t\t\t\tthis.updateCartList();\n\t\t\t}\n\t\t},\n\n\t\t// 修改添加商品方法\n\t\thandleAddToCart(categoryIndex, productIndex) {\n\t\t\tlet cartData = uni.getStorageSync('cartData')\n\t\t\tlet cartList = cartData ? JSON.parse(cartData) : []\n\t\t\t\n\t\t\tconst existItem = cartList.find(item => \n\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\titem.productIndex === productIndex\n\t\t\t);\n\n\t\t\tif (existItem) {\n\t\t\t\tif (existItem.quantity >= existItem.stock) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '已达到库存上限',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\texistItem.quantity++;\n\t\t\t\tuni.setStorageSync('cartData', JSON.stringify(cartList));\n\t\t\t\tthis.loadCartCount();\n\t\t\t\tthis.updateCartList();\n\t\t\t}\n\t\t},\n\n\t\t// 添加库存限制检查方法\n\t\tisStockLimit(categoryIndex, productIndex) {\n\t\t\tconst cartItem = this.cartList.find(item => \n\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\titem.productIndex === productIndex\n\t\t\t);\n\t\t\treturn cartItem ? cartItem.quantity >= cartItem.stock : false;\n\t\t},\n\n\t\t// 处理数量输入\n\t\thandleQuantityInput(event, categoryIndex, productIndex) {\n\t\t\tconst value = event.detail.value;\n\t\t\tconst numValue = value.replace(/\\D/g, '');\n\t\t\t\n\t\t\tlet cartData = uni.getStorageSync('cartData')\n\t\t\tlet cartList = cartData ? JSON.parse(cartData) : []\n\t\t\t\n\t\t\tconst cartItem = cartList.find(item => \n\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\titem.productIndex === productIndex\n\t\t\t);\n\t\t\t\n\t\t\tif (!cartItem) return;\n\t\t\t\n\t\t\tif (numValue === '') {\n\t\t\t\tcartItem._tempValue = '';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconst newQuantity = parseInt(numValue);\n\t\t\t\n\t\t\tif (newQuantity === 0) {\n\t\t\t\tcartList = cartList.filter(item => \n\t\t\t\t\t!(item.categoryIndex === categoryIndex && \n\t\t\t\t\t\titem.productIndex === productIndex)\n\t\t\t\t);\n\t\t\t\tuni.setStorageSync('cartData', JSON.stringify(cartList));\n\t\t\t\tthis.loadCartCount();\n\t\t\t\tthis.updateCartList();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif (newQuantity > cartItem.stock) {\n\t\t\t\tcartItem.quantity = cartItem.stock;\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: `已达到库存上限${cartItem.stock}件`,\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcartItem.quantity = newQuantity;\n\t\t\t}\n\t\t\t\n\t\t\tdelete cartItem._tempValue;\n\t\t\tuni.setStorageSync('cartData', JSON.stringify(cartList));\n\t\t\tthis.loadCartCount();\n\t\t\tthis.updateCartList();\n\t\t},\n\n\t\t// ���理输入框失焦\n\t\thandleQuantityBlur(categoryIndex, productIndex) {\n\t\t\tlet cartData = uni.getStorageSync('cartData')\n\t\t\tlet cartList = cartData ? JSON.parse(cartData) : []\n\t\t\t\n\t\t\tconst cartItem = cartList.find(item => \n\t\t\t\titem.categoryIndex === categoryIndex && \n\t\t\t\titem.productIndex === productIndex\n\t\t\t);\n\t\t\t\n\t\t\tif (cartItem) {\n\t\t\t\tif (cartItem._tempValue === '' || cartItem.quantity === 0) {\n\t\t\t\t\tcartList = cartList.filter(item => \n\t\t\t\t\t\t!(item.categoryIndex === categoryIndex && \n\t\t\t\t\t\t\titem.productIndex === productIndex)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tcartItem.quantity = parseInt(cartItem.quantity) || 1;\n\t\t\t\t}\n\t\t\t\tdelete cartItem._tempValue;\n\t\t\t\tuni.setStorageSync('cartData', JSON.stringify(cartList));\n\t\t\t\tthis.loadCartCount();\n\t\t\t\tthis.updateCartList();\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 更新购物车列表\n\t\tupdateCartList() {\n\t\t\tconst cartData = uni.getStorageSync('cartData')\n\t\t\tif (cartData) {\n\t\t\t\tthis.cartList = JSON.parse(cartData)\n\t\t\t\t// 更新总价\n\t\t\t\tthis.totalPrice = this.cartList.reduce((total, item) => total + item.price * item.quantity, 0)\n\t\t\t}\n\t\t}\n\t},\n\tonShow() {\n\t\tthis.loadCartCount();\n\t\tthis.updateCartList();\n\t}\n}\n</script>\n\n<style>\n.container {\n\tpadding-bottom: 120rpx;\n\tbackground-color: #F6F6F6;\n\tmin-height: 100vh;\n}\n\n.product-info {\n\tbackground: #fff;\n\tpadding: 20rpx 40rpx;\n\tmargin: 10rpx 20rpx;\n}\n\n.product-image {\n\twidth: 100%;\n\theight: 400rpx;\n}\n\n.info-content {\n\tpadding: 20rpx 0;\n}\n\n.info-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: flex-start;\n}\n\n.info-left {\n\tflex: 1;\n}\n\n.info-right {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\twidth: 80rpx;\n}\n\n.favorite-btn {\n\tpadding: 10rpx;\n}\n\n.favorite-icon {\n\twidth: 40rpx;\n\theight: 40rpx;\n}\n\n.title {\n\tfont-size: 32rpx;\n\tmargin-bottom: 10rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n\tpadding-right: 20rpx;\n}\n\n.price {\n\tfont-size: 36rpx;\n\tcolor: #ff6b6b;\n\tfont-weight: bold;\n}\n\n.stock {\n\tfont-size: 24rpx;\n\tcolor: #999;\n\tmargin-top: 4rpx;\n\ttext-align: center;\n}\n\n.detail-section {\n\tmargin: 10rpx 20rpx;\n\tpadding: 20rpx 40rpx;\n\tbackground: #fff;\n}\n\n.section-title {\n\tfont-size: 28rpx;\n\tfont-weight: bold;\n\tmargin-bottom: 20rpx;\n}\n\n.bottom-bar {\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\theight: 120rpx;\n\tbackground: #fff;\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 10rpx 40rpx;\n\tborder-top: 1rpx solid #eee;\n\tz-index: 99;\n}\n\n.left-btns {\n\tdisplay: flex;\n\talign-items: center;\n\tflex: 0 0 auto;\n}\n\n.icon-btn {\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding: 0 20rpx;\n\tmin-width: 80rpx;\n}\n\n.icon-image {\n\twidth: 44rpx;\n\theight: 44rpx;\n\tmargin-bottom: 4rpx;\n}\n\n.btn-text {\n\tfont-size: 24rpx;\n\tcolor: #666;\n\tmargin-top: 4rpx;\n}\n\n.badge {\n\tposition: absolute;\n\ttop: -10rpx;\n\tright: 10rpx;\n\tbackground: #ff6b6b;\n\tcolor: #fff;\n\tfont-size: 20rpx;\n\tpadding: 0 10rpx;\n\tborder-radius: 20rpx;\n\tmin-width: 28rpx;\n\theight: 28rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 1;\n}\n\n.right-btns {\n\tflex: 1;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tmargin-left: 20rpx;\n}\n\n.add-cart-btn,\n.buy-btn {\n\tpadding: 20rpx 40rpx;\n\tborder-radius: 40rpx;\n\tfont-size: 28rpx;\n\tmargin-left: 20rpx;\n\twhite-space: nowrap;\n}\n\n.add-cart-btn {\n\tbackground: #fff5f5;\n\tcolor: #ff6b6b;\n}\n\n.buy-btn {\n\tbackground: #ff6b6b;\n\tcolor: #fff;\n}\n\n.detail-section {\n\tmargin-top: 20rpx;\n\tpadding: 20rpx;\n\tbackground: #fff;\n}\n\n.detail-content {\n\tpadding: 20rpx;\n}\n\n.detail-content h3 {\n\tfont-size: 28rpx;\n\tfont-weight: bold;\n\tmargin: 20rpx 0;\n\tcolor: #333;\n}\n\n.detail-content p {\n\tfont-size: 26rpx;\n\tcolor: #666;\n\tline-height: 1.6;\n\tmargin: 10rpx 0;\n}\n\n.detail-content ul {\n\tpadding-left: 40rpx;\n}\n\n.detail-content li {\n\tfont-size: 26rpx;\n\tcolor: #666;\n\tline-height: 1.6;\n\tmargin: 6rpx 0;\n}\n\n/* 添加购物车弹出层样 */\n.cart-popup {\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\tz-index: 999;\n}\n\n.cart-mask {\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\tbackground: rgba(0, 0, 0, 0.5);\n}\n\n.cart-content {\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: #fff;\n\tborder-radius: 20rpx 20rpx 0 0;\n\tmin-height: 300rpx;\n\tmax-height: 70vh;\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n\tpadding: 0 40rpx;\n}\n\n.cart-header {\n\tpadding: 30rpx;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tborder-bottom: 1rpx solid #eee;\n}\n\n.header-left {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.cart-header .title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n}\n\n.cart-header .cart-count {\n\tfont-size: 24rpx;\n\tcolor: #666;\n\tmargin-left: 10rpx;\n\tfont-weight: normal;\n}\n\n.cart-header .clear {\n\tfont-size: 28rpx;\n\tcolor: #999;\n}\n\n.cart-list {\n\tflex: 1;\n\tpadding: 0 10rpx;\n\tmax-height: calc(70vh - 200rpx);\n\toverflow-y: auto;\n}\n\n.cart-item {\n\tdisplay: flex;\n\tpadding: 20rpx;\n\tborder-bottom: 1rpx solid #eee;\n}\n\n.cart-item image {\n\twidth: 160rpx;\n\theight: 160rpx;\n\tmargin-right: 20rpx;\n\tflex-shrink: 0;\n}\n\n.item-info {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n}\n\n.item-name {\n\tfont-size: 28rpx;\n\tcolor: #333;\n\tline-height: 1.4;\n}\n\n.item-price {\n\tfont-size: 32rpx;\n\tcolor: #ff6b6b;\n\tfont-weight: bold;\n}\n\n.item-bottom {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-top: 10rpx;\n}\n\n.quantity-control {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 48rpx;\n}\n\n.quantity-control .minus,\n.quantity-control .plus {\n\twidth: 44rpx;\n\theight: 44rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 32rpx;\n}\n\n.quantity-control .minus {\n\tborder: 1rpx solid #ddd;\n\tborder-radius: 50%;\n\tcolor: #666;\n}\n\n.quantity-control .num {\n\tmin-width: 60rpx;\n\ttext-align: center;\n\tfont-size: 28rpx;\n\tcolor: #333;\n\tmargin: 0 10rpx;\n}\n\n.quantity-control .plus {\n\tbackground: #ff6b6b;\n\tcolor: #fff;\n\tborder-radius: 50%;\n}\n\n.quantity-control .plus.disabled {\n\tbackground-color: #ccc;\n\tpointer-events: none;\n}\n\n.cart-empty {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 60rpx 0;\n}\n\n.empty-image {\n\twidth: 200rpx;\n\theight: 200rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.empty-text {\n\tfont-size: 28rpx;\n\tcolor: #999;\n}\n\n/* 添加购物车部结算栏样式 */\n.cart-footer {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 20rpx 30rpx;\n\tbackground: #fff;\n\tborder-top: 1rpx solid #eee;\n}\n\n.cart-footer .total {\n\tfont-size: 28rpx;\n\tcolor: #333;\n}\n\n.cart-footer .price {\n\tfont-size: 36rpx;\n\tcolor: #ff6b6b;\n\tfont-weight: bold;\n}\n\n.cart-footer .checkout-btn {\n\tbackground: #ff6b6b;\n\tcolor: #fff;\n\tpadding: 20rpx 40rpx;\n\tborder-radius: 40rpx;\n\tfont-size: 28rpx;\n}\n</style> ","import mod from \"-!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./productDetail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./productDetail.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1733474261737\n      var cssReload = require(\"D:/HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/productDetail/productDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./productDetail.vue?vue&type=template&id=653d9208&\"\nvar renderjs\nimport script from \"./productDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./productDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./productDetail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/productDetail/productDetail.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./productDetail.vue?vue&type=template&id=653d9208&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.showCartPopup ? _vm.cartList.length : null\n  var g1 = _vm.showCartPopup ? _vm.cartList.length : null\n  var l0 =\n    _vm.showCartPopup && !(g1 === 0)\n      ? _vm.__map(_vm.cartList, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var m0 = _vm.isStockLimit(item.categoryIndex, item.productIndex)\n          return {\n            $orig: $orig,\n            m0: m0,\n          }\n        })\n      : null\n  var g2 = _vm.showCartPopup ? _vm.cartList.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l0: l0,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./productDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.7.9.20230324/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./productDetail.vue?vue&type=script&lang=js&\""],"sourceRoot":""}